angular.module("myApp",["ngRoute","angularTrix","angularify.semantic.dropdown","ui.tinymce","myApp.common","myApp.main","myApp.user"]).config(["$routeProvider","$locationProvider","$httpProvider",function(e,t,r){r.defaults.headers.get||(r.defaults.headers.get={}),r.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",r.defaults.headers.get["Cache-Control"]="no-cache",r.defaults.headers.get.Pragma="no-cache",e.when("/",{templateUrl:"template/testNgRoute-main.html",controller:"mainCtrl",resolve:{mainData:["testService",function(e){return e.getMain().then(function(e){return e.data}).catch(function(e){return e.data})}]}}).when("/user/:userId",{templateUrl:"template/testNgRoute-user.html",controller:"userCtrl",resolve:{userData:["testService",function(e){return e.getUser().then(function(e){return e.data})}]},reloadOnSearch:!1}).when("/tinymice",{templateUrl:"template/tinymice.html",controller:"tinymiceCtrl",reloadOnSearch:!1}).when("/dropdown",{templateUrl:"template/dropdown.html",controller:"TestDropDownCtrl",reloadOnSearch:!1}).otherwise({redirectTo:"/"}),t.html5Mode(!1),t.hashPrefix(""),r.interceptors.push("httpInterceptor"),console.log("the angular app is start!")}]).run(["$rootScope","$templateCache",function(e,t){e.loading=!1,e.$on("$routeChangeStart",function(e,r,o){void 0!==o&&t.remove(o.templateUrl)}),e.$on("$routeUpdate",function(e,t,r){console.log(e),console.log(t),console.log(r)})}]),angular.element(document).ready(function(){angular.bootstrap(document,["myApp"])});
angular.module("myApp.common",[]),angular.module("myApp.main",["myApp.main.tinymice","myApp.main.dropdown"]),angular.module("myApp.main.tinymice",["myApp.common","ui.tinymce"]),angular.module("myApp.main.dropdown",["myApp.common","angularify.semantic.dropdown"]),angular.module("myApp.user",["myApp.common"]);
angular.module("ui.tinymce",[]).value("uiTinymceConfig",{}).directive("uiTinymce",["$rootScope","$compile","$timeout","$window","$sce","uiTinymceConfig","uiTinymceService",function(e,t,n,i,r,o,u){return o=o||{},o.baseUrl&&(tinymce.baseURL=o.baseUrl),{require:["ngModel","^?form"],priority:599,link:function(c,a,s,d){function f(e){e?(m(),v&&v.getBody().setAttribute("contenteditable",!1)):(m(),v&&!v.settings.readonly&&v.getDoc()&&v.getBody().setAttribute("contenteditable",!0))}function m(){v||(v=tinymce.get(s.id))}if(i.tinymce){var l,v,$=d[0],g=d[1]||null,y={debounce:!0},b=function(t){var n=t.getContent({format:y.format}).trim();n=r.trustAsHtml(n),$.$setViewValue(n),e.$$phase||c.$digest()},p=u.getUniqueId();s.$set("id",p),l={},angular.extend(l,c.$eval(s.uiTinymce));var h=function(e){var t;return function(e){n.cancel(t),t=n(function(){return function(e){e.isDirty()&&(e.save(),b(e))}(e)},400)}}(),U={setup:function(t){t.on("init",function(){$.$render(),$.$setPristine(),$.$setUntouched(),g&&g.$setPristine()}),t.on("ExecCommand change NodeChange ObjectResized",function(){if(!y.debounce)return t.save(),void b(t);h(t)}),t.on("blur",function(){a[0].blur(),$.$setTouched(),e.$$phase||c.$digest()}),t.on("remove",function(){a.remove()}),o.setup&&o.setup(t,{updateView:b}),l.setup&&l.setup(t,{updateView:b})},format:l.format||"html",selector:"#"+s.id};angular.extend(y,o,l,U),n(function(){y.baseURL&&(tinymce.baseURL=y.baseURL);var e=tinymce.init(y);e&&"function"==typeof e.then?e.then(function(){f(c.$eval(s.ngDisabled))}):f(c.$eval(s.ngDisabled))}),$.$formatters.unshift(function(e){return e?r.trustAsHtml(e):""}),$.$parsers.unshift(function(e){return e?r.getTrustedHtml(e):""}),$.$render=function(){m();var e=$.$viewValue?r.getTrustedHtml($.$viewValue):"";v&&v.getDoc()&&(v.setContent(e),v.fire("change"))},s.$observe("disabled",f);var T=c.$on("$tinymce:refresh",function(e,n){var i=s.id;if(angular.isUndefined(n)||n===i){var r=a.parent(),o=a.clone();o.removeAttr("id"),o.removeAttr("style"),o.removeAttr("aria-hidden"),tinymce.execCommand("mceRemoveEditor",!1,i),r.append(t(o)(c)),T()}});c.$on("$destroy",function(){m(),v&&(v.remove(),v=null)})}}}}]).service("uiTinymceService",[function(){return new function(){var e=0;return{getUniqueId:function(){return"ui-tinymce-"+ ++e}}}}]);
angular.module("myApp.common").directive("myInputParse",function(){return{restrict:"EA",priority:-1,require:"?ngModel",link:function(e,t,n,i){i&&(console.log("myInputParse"),i.$parsers.push(function(e){var t=/^\d+\.?\d{0,2}$/,n=t.test(e),r=e.substring(0,e.length-1);return n?e:(i.$setViewValue(r),i.$render(),r)}))}}}).directive("companyEmailValidator",function(){var e=/^(?=.{1,254}$)(?=.{1,254}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/;return{restrict:"EA",priority:-1,require:"?ngModel",link:function(t,n,i,r){r&&r.$validators.email&&(r.$validators.email=function(t,n){var i=t||n;return r.$isEmpty(i)||e.test(i)})}}}).directive("retainDecimal",function(){var e=/^\d+$/,t=/^\d+(\.)?\d{0,1}$/,n=/^\d+(\.)?\d{0,2}$/;return{restrict:"A",require:"?ngModel",link:function(i,r,a,o){o.$parsers.push(function(i){var r,d,s=a.retainDecimal,l=i.substring(0,i.length-1),c=i.charAt(i.length-1);switch(s){case"1":r=t.test(i),d=".0";break;case"2":r=n.test(i),d=".00";break;default:r=e.test(i),d=""}return r?"."==c?(o.$setViewValue(l+d),o.$render(),l+d):i:(o.$setViewValue(l),o.$render(),l)})}}}).directive("searchSelect",["$sce",function(e){return{restrict:"EA",replace:!0,transclude:!0,require:"?ngModel",scope:{options:"=",name:"@"},template:'<div class="ui fluid search selection dropdown upward">\t\t\t\t<input type="hidden" name="{{name}}" ng-model="selectedValue">\t\t\t\t<i class="dropdown icon"></i>\t\t\t\t<div class="default text" ng-bind="selectedValue"></div>\t\t\t  \t<div class="menu transition hidden">\t\t\t    \t<div class="item" data-index="{{option.index}}" data-value="{{option.index}}" ng-repeat = "option in options" ng-bind="option.item"></div>\t\t\t  \t</div>\t\t\t</div>',link:function(e,t,n,i){t.dropdown({fullTextSearch:!0,onChange:function(t,n,r){e.$apply(function(){i.$setViewValue(t)})}}),i.$render=function(){console.log("it is $render"),t.dropdown("set selected","3")},n.$observe("ngModel",function(e){console.log(e)})}}}]);
angular.module("myApp.common").factory("httpInterceptor",["$sce","$rootScope","$timeout",function(n,e,t){var o,r;return{request:function(n){return o=(new Date).getTime(),e.loading=!0,n},response:function(n){return r=(new Date).getTime(),e.$evalAsync(function(){r-o>500?e.loading=!1:t(function(){e.loading=!1},500)}),n}}}]);
angular.module("myApp.common").factory("testService",["$http","$q",function(t,e){return{getMain:function(){return t.get("mock/testNgRoute-main.json")},getUser:function(){return t.get("/api/user/1")},getRest:function(){return t.get("/restapi/login")}}}]);
angular.module("myApp.main.dropdown").controller("TestDropDownCtrl",["$scope","$route","$routeParams","$location","$sce",function(o,e,t,m,i){o.dropdown_model="item3",o.dropdown_repeat_model="item1",o.dropdown_items=["item1","item2","item3","item4"],o.dropdown_key_value_model="",o.dropdown_key_value_items={item1:"Cool item 1",item2:"Cool item 2",item3:"Cool item 3",item4:"Cool item 4"}}]);
angular.module("myApp.main").controller("mainCtrl",["$scope","$route","$routeParams","$location","mainData","$parse",function(e,t,i,n,s,a){e.pageName=s.pageName,e.myInputVal1="111",e.myInputVal2="",e.myInputVal3="",e.myInputVal4="",e.selectVal="",e.parentOptions=[{item:"Arabic Chinese",select:!0,index:1},{item:"Chinese ",select:!1,index:2},{item:"Dutch",select:!1,index:3},{item:"English",select:!1,index:4},{item:"French",select:!1,index:5},{item:"German",select:!1,index:6},{item:"Greek",select:!1,index:7},{item:"Hungarian",select:!1,index:8},{item:"Italian",select:!1,index:9},{item:"Japanese",select:!1,index:10},{item:"Korean",select:!1,index:11},{item:"Lithuanian",select:!1,index:12},{item:"Persian",select:!1,index:13},{item:"Polish",select:!1,index:14},{item:"Portuguese",select:!1,index:15},{item:"Russian",select:!1,index:16},{item:"Spanish",select:!1,index:17},{item:"Swedish",select:!1,index:18},{item:"Turkish",select:!1,index:19},{item:"Vietnamese",select:!1,index:20}],e.updateVal=function(){var t=a("'it is my test!the result is:' + myInputVal1");e.myInputValRes=t(e)}}]);
angular.module("myApp.main.tinymice").controller("tinymiceCtrl",["$scope","$route","$routeParams","$location","$sce",function(t,i,e,n,a){var l=this;t.setting={inline:!1,plugins:"advlist autolink lists link image charmap print preview anchor",readonly:"view"===t.operate,skin:"lightgray",theme:"modern",min_height:200,max_height:500},this.updateHtml=function(){l.tinymceHtml=a.trustAsHtml(l.tinymce)}}]);
angular.module("myApp.user").controller("userCtrl",["$scope","$route","$routeParams","$location","userData",function(e,o,t,a,s){e.pageName=s.pageName,e.userId=t.userId,e.foo="please input!";var l=this;console.log(this),console.log(l),this.update=function(){console.log("this update")},this.delete=function(){console.log("this update")},e.exportFile=function(){var o=e.type;e.searchFieldsData}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIm1vZHVsZS5qcyIsImRpcmVjdGl2ZS9hbmd1bGFyLXRpbnltY2UuanMiLCJkaXJlY3RpdmUvaW5wdXREaXJlLmpzIiwic2VydmljZS9pbnRlckNlcHRvclNlcnYuanMiLCJzZXJ2aWNlL3Rlc3RTZXJ2LmpzIiwiY29udHJvbGxlci9tYWluL2Ryb3Bkb3duQ3RybC5qcyIsImNvbnRyb2xsZXIvbWFpbi9tYWluQ3RybC5qcyIsImNvbnRyb2xsZXIvbWFpbi90aW55bWljZUN0cmwuanMiLCJjb250cm9sbGVyL3VzZXIvdXNlckN0cmwuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRodHRwUHJvdmlkZXIiLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJnZXQiLCIkcm91dGVQcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJyZXNvbHZlIiwibWFpbkRhdGEiLCJ0ZXN0U2VydmljZSIsImdldE1haW4iLCJ0aGVuIiwicmVzIiwidXNlckRhdGEiLCJnZXRVc2VyIiwiZGF0YSIsInJlbG9hZE9uU2VhcmNoIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyIsIiRsb2NhdGlvblByb3ZpZGVyIiwiaHRtbDVNb2RlIiwiaW50ZXJjZXB0b3JzIiwicHVzaCIsIiRyb290U2NvcGUiLCIkb24iLCJldmVudCIsIm5leHQiLCJjdXJyZW50IiwibG9nIiwiZWxlbWVudCIsImRvY3VtZW50IiwicmVhZHkiLCJib290c3RyYXAiLCJ2YWx1ZSIsImRpcmVjdGl2ZSIsInVpVGlueW1jZUNvbmZpZyIsImJhc2VVcmwiLCJ0aW55bWNlIiwiYmFzZVVSTCIsImRpc2FibGVkIiwiZW5zdXJlSW5zdGFuY2UiLCJ0aW55SW5zdGFuY2UiLCJzZXR0aW5ncyIsInJlYWRvbmx5IiwiZ2V0RG9jIiwiZ2V0Qm9keSIsInNldEF0dHJpYnV0ZSIsIiR3aW5kb3ciLCJleHByZXNzaW9uIiwibmdNb2RlbCIsImN0cmxzIiwiZm9ybSIsIm9wdGlvbnMiLCJkZWJvdW5jZSIsInVwZGF0ZVZpZXciLCJlZGl0b3IiLCJjb250ZW50IiwiZ2V0Q29udGVudCIsImZvcm1hdCIsInRyaW0iLCIkc2V0Vmlld1ZhbHVlIiwiJCRwaGFzZSIsInNjb3BlIiwiJGRpZ2VzdCIsImRlYm91bmNlZFVwZGF0ZSIsImRlYm91bmNlZFVwZGF0ZURlbGF5IiwiZWQiLCJkZWJvdW5jZWRVcGRhdGVUaW1lciIsIiR0aW1lb3V0Iiwic2F2ZSIsIiRyZW5kZXIiLCIkc2V0UHJpc3RpbmUiLCJvbiIsInNldHVwIiwibWF5YmVJbml0UHJvbWlzZSIsImluaXQiLCJ0b2dnbGVEaXNhYmxlIiwiJGV2YWwiLCJhdHRycyIsIm5nRGlzYWJsZWQiLCJ2aWV3VmFsdWUiLCIkdmlld1ZhbHVlIiwiJHNjZSIsImdldFRydXN0ZWRIdG1sIiwic2V0Q29udGVudCIsImZpcmUiLCJpc1VuZGVmaW5lZCIsImlkIiwiZWlkIiwicGFyZW50RWxlbWVudCIsInBhcmVudCIsImNsb25lZEVsZW1lbnQiLCJyZW1vdmVBdHRyIiwiYXBwZW5kIiwiJGNvbXBpbGUiLCJ1bmJpbmRFdmVudExpc3RlbmVyIiwicmVtb3ZlIiwiZ2V0VW5pcXVlSWQiLCJJRF9BVFRSIiwicmVzdHJpY3QiLCJwcmlvcml0eSIsInJlcXVpcmUiLCJsaW5rIiwiJHNjb3BlIiwiJGVsZW0iLCIkYXR0cnMiLCJuZ01vZGVsQ3RybCIsImNvbnNvbGUiLCIkcGFyc2VycyIsIlZBTElEX1JFR0VYUCIsImlzVmFsaWQiLCJ0ZXN0IiwibGFzdFZhbCIsInN1YnN0cmluZyIsImxlbmd0aCIsIiR2YWxpZGF0b3JzIiwiZW1haWwiLCJtb2RlbFZhbHVlIiwiJGlzRW1wdHkiLCJFTUFJTF9SRUdFWFAiLCJzdHIiLCJyZXRhaW5EZWNpbWFsIiwibGFzdENoYXIiLCJjaGFyQXQiLCJST1VORFVQXzFfUkVHRVhQIiwiUk9VTkRVUF8yX1JFR0VYUCIsIlJPVU5EVVBfMF9SRUdFWFAiLCJyZXBsYWNlIiwibmFtZSIsInRlbXBsYXRlIiwiZHJvcGRvd24iLCJmdWxsVGV4dFNlYXJjaCIsIm9uQ2hhbmdlIiwidGV4dCIsIiRzZWxlY3RlZEl0ZW0iLCIkYXBwbHkiLCJmYWN0b3J5Iiwic3RhcnRUaW1lIiwiZW5kVGltZSIsInJlcXVlc3QiLCJyZXEiLCJsb2FkaW5nIiwicmVzcG9uc2UiLCJEYXRlIiwiZ2V0VGltZSIsIiRldmFsQXN5bmMiLCIkaHR0cCIsIiRxIiwiJHJvdXRlIiwiJHJvdXRlUGFyYW1zIiwiJGxvY2F0aW9uIiwiZHJvcGRvd25fbW9kZWwiLCJkcm9wZG93bl9yZXBlYXRfbW9kZWwiLCJkcm9wZG93bl9pdGVtcyIsImRyb3Bkb3duX2tleV92YWx1ZV9tb2RlbCIsImRyb3Bkb3duX2tleV92YWx1ZV9pdGVtcyIsIml0ZW0xIiwiaXRlbTQiLCJteUlucHV0VmFsMSIsIm15SW5wdXRWYWwyIiwibXlJbnB1dFZhbDMiLCJteUlucHV0VmFsNCIsInNlbGVjdFZhbCIsInBhcmVudE9wdGlvbnMiLCJpdGVtIiwic2VsZWN0IiwiaW5kZXgiLCJjdHJsIiwidGhpcyIsInNldHRpbmciLCJpbmxpbmUiLCJwbHVnaW5zIiwic2tpbiIsInRoZW1lIiwibWF4X2hlaWdodCIsInBhZ2VOYW1lIiwidXNlcklkIiwiZm9vIiwidHlwZSIsInNlYXJjaEZpZWxkc0RhdGEiXSwibWFwcGluZ3MiOiJBQUFBQSxRQUFRQyxPQUFPLFNBQ2QsVUFDQSxjQUNBLCtCQUNBLGFBQ0EsZUFDQSxhQUNBLGVBQ0VDLHlCQUVGLDZFQUtBQyxFQUFjQyxTQUFTQyxRQUFRQywwSEFLL0JILEVBQUFDLFNBQUFDLFFBQUFDLElBQUEsT0FBQSxXQUVDQyxFQUFZQyxLQUFBLEtBQ1pDLFlBQVcsaUNBQ1hDLFdBQVEsV0FDUEMsU0FDQ0MsVUFDQyxjQUNFLFNBQU1DLEdBQ0QsTUFBSUEsR0FBQUMsVUFBQUMsS0FBQSxTQUFBQyw0SkFZVEMsVUFDTCxjQUNBLFNBQVdKLEdBQ0gsTUFBQUEsR0FBQUssVUFBQUgsS0FBQSxTQUFBQyxHQUNQLE1BQUFBLEdBQUFHLDhCQU1EWCxLQUFB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QSw2RkFFREMsS0FBSyxZQUNIQyxNQUFLLHdCQUVSQyxXQUFBO0FDZkhsTCxRQUFRQyxPQUFPLGNBQUFTLFdBQUEsWUFDZCxTQUNBLFNBQ0EsZUFDQSxZQUNBLFdBQ0EsU0FBUWlHLEVBQUk2QyxFQUFBQyxFQUFBQyxFQUFBekksR0FDWjBGLEVBQVF3RSxTQUFJbEssRUFBQWtLLFNBQ1p4RSxFQUFLeUUsT0FBUzNCLEVBQVUyQixPQUN2QnpFLEVBQVEwRSxJQUFJLDBCQUVidEUsU0FBSy9FLElBQVM0SSxNQUNiN0QsUUFBUS9FLElBQUkySSwwQkFFYjVELFFBQU8vRSxJQUFBLDJGQWtESixHQUFBc0osR0FBQTNFLEVBQUEyRSxJQUFBM0UsR0FBQTRFIiwiZmlsZSI6ImFsbC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgnbXlBcHAnLFtcblx0J25nUm91dGUnLFxuXHQnYW5ndWxhclRyaXgnLFxuXHQnYW5ndWxhcmlmeS5zZW1hbnRpYy5kcm9wZG93bicsXG5cdCd1aS50aW55bWNlJyxcblx0J215QXBwLmNvbW1vbicsXG5cdCdteUFwcC5tYWluJyxcblx0J215QXBwLnVzZXInXG5dKS5jb25maWcoZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyLCAkaHR0cFByb3ZpZGVyKXtcbiAgICAvL0luaXRpYWxpemUgR2V0IFJlcXVlc3Rcblx0aWYoISRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5nZXQpe1xuXHQgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5nZXQgPSB7fTtcblx0fVxuXG5cdC8vRGlzYWJsZSBJRSBBamF4IFJlcXVlc3QgQ2FjaGVcblx0JGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnWC1SZXF1ZXN0ZWQtV2l0aCddID0gJ1hNTEh0dHBSZXF1ZXN0Jztcblx0JGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmdldFsnQ2FjaGUtQ29udHJvbCddID0gJ25vLWNhY2hlJztcblx0JGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmdldFsnUHJhZ21hJ10gPSAnbm8tY2FjaGUnO1xuXHRcblx0Ly9yb3V0ZSBzZXR0aW5nXG5cdCRyb3V0ZVByb3ZpZGVyXG5cdC53aGVuKCcvJyx7XG5cdFx0dGVtcGxhdGVVcmw6J3RlbXBsYXRlL3Rlc3ROZ1JvdXRlLW1haW4uaHRtbCcsXG5cdFx0Y29udHJvbGxlcjonbWFpbkN0cmwnLFxuXHRcdHJlc29sdmU6e1xuXHRcdFx0bWFpbkRhdGE6ZnVuY3Rpb24odGVzdFNlcnZpY2Upe1xuXHRcdFx0XHRyZXR1cm4gdGVzdFNlcnZpY2UuZ2V0TWFpbigpLnRoZW4oZnVuY3Rpb24ocmVzKXtcblx0XHRcdFx0XHRyZXR1cm4gcmVzLmRhdGE7XG5cdFx0XHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycil7XG5cdFx0XHRcdFx0cmV0dXJuIGVyci5kYXRhO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cbi8vXHRcdFx0cmVzdERhdGE6ZnVuY3Rpb24odGVzdFNlcnZpY2Upe1xuLy9cdFx0XHRcdHJldHVybiB0ZXN0U2VydmljZS5nZXRSZXN0KCkudGhlbihmdW5jdGlvbihyZXMpe1xuLy9cdFx0XHRcdFx0cmV0dXJuIHJlcy5kYXRhO1xuLy9cdFx0XHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycil7XG4vL1x0XHRcdFx0XHRyZXR1cm4gZXJyLmRhdGE7XG4vL1x0XHRcdFx0fSk7XG4vL1x0XHRcdH1cblx0XHR9XG5cdH0pXG5cdC53aGVuKCcvdXNlci86dXNlcklkJyx7XG5cdFx0dGVtcGxhdGVVcmw6J3RlbXBsYXRlL3Rlc3ROZ1JvdXRlLXVzZXIuaHRtbCcsXG5cdFx0Y29udHJvbGxlcjondXNlckN0cmwnLFxuXHRcdHJlc29sdmU6e1xuXHRcdFx0dXNlckRhdGE6ZnVuY3Rpb24odGVzdFNlcnZpY2Upe1xuXHRcdFx0XHRyZXR1cm4gdGVzdFNlcnZpY2UuZ2V0VXNlcigpLnRoZW4oZnVuY3Rpb24ocmVzKXtcblx0XHRcdFx0XHRyZXR1cm4gcmVzLmRhdGE7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0cmVsb2FkT25TZWFyY2g6ZmFsc2Vcblx0fSlcblx0LndoZW4oJy90aW55bWljZScse1xuXHRcdHRlbXBsYXRlVXJsOid0ZW1wbGF0ZS90aW55bWljZS5odG1sJyxcblx0XHRjb250cm9sbGVyOid0aW55bWljZUN0cmwnLFxuXHRcdHJlbG9hZE9uU2VhcmNoOmZhbHNlXG5cdH0pXG5cdC53aGVuKCcvZHJvcGRvd24nLHtcblx0XHR0ZW1wbGF0ZVVybDondGVtcGxhdGUvZHJvcGRvd24uaHRtbCcsXG5cdFx0Y29udHJvbGxlcjonVGVzdERyb3BEb3duQ3RybCcsXG5cdFx0cmVsb2FkT25TZWFyY2g6ZmFsc2Vcblx0fSlcblx0Lm90aGVyd2lzZSh7XG5cdFx0cmVkaXJlY3RUbzonLydcblx0fSk7XG5cdFxuXHQvL2h0bWw1IG1vZGUgc2V0dGluZ1xuXHQkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUoZmFsc2UpO1xuXHQkbG9jYXRpb25Qcm92aWRlci5oYXNoUHJlZml4KCcnKTtcblxuXHQvL0ludGVyY2VwdG9yXG5cdCRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ2h0dHBJbnRlcmNlcHRvcicpO1xuXHRjb25zb2xlLmxvZygndGhlIGFuZ3VsYXIgYXBwIGlzIHN0YXJ0IScpO1xufSlcbi5ydW4oZnVuY3Rpb24oJHJvb3RTY29wZSwkdGVtcGxhdGVDYWNoZSl7XG5cdCRyb290U2NvcGUubG9hZGluZyA9IGZhbHNlO1xuICAgICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uKGV2ZW50LCBuZXh0LCBjdXJyZW50KSB7ICBcbiAgICAgICAgaWYgKHR5cGVvZihjdXJyZW50KSAhPT0gJ3VuZGVmaW5lZCcpeyAgXG4gICAgICAgICAgICAkdGVtcGxhdGVDYWNoZS5yZW1vdmUoY3VycmVudC50ZW1wbGF0ZVVybCk7ICBcbiAgICAgICAgfSAgXG4gICAgfSk7XG4gICAgJHJvb3RTY29wZS4kb24oJyRyb3V0ZVVwZGF0ZScsZnVuY3Rpb24oZXZlbnQsIG5leHQsIGN1cnJlbnQpe1xuICAgIFx0Y29uc29sZS5sb2coZXZlbnQpO1xuICAgIFx0Y29uc29sZS5sb2cobmV4dCk7XG4gICAgXHRjb25zb2xlLmxvZyhjdXJyZW50KTtcbiAgICB9KTtcbn0pO1xuYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xuICAgYW5ndWxhci5ib290c3RyYXAoZG9jdW1lbnQsWydteUFwcCddKTtcbn0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ215QXBwLmNvbW1vbicsW10pO1xuYW5ndWxhci5tb2R1bGUoJ215QXBwLm1haW4nLFsnbXlBcHAubWFpbi50aW55bWljZScsJ215QXBwLm1haW4uZHJvcGRvd24nXSk7XG5hbmd1bGFyLm1vZHVsZSgnbXlBcHAubWFpbi50aW55bWljZScsWydteUFwcC5jb21tb24nLCd1aS50aW55bWNlJ10pO1xuYW5ndWxhci5tb2R1bGUoJ215QXBwLm1haW4uZHJvcGRvd24nLFsnbXlBcHAuY29tbW9uJywnYW5ndWxhcmlmeS5zZW1hbnRpYy5kcm9wZG93biddKTtcbmFuZ3VsYXIubW9kdWxlKCdteUFwcC51c2VyJyxbJ215QXBwLmNvbW1vbiddKTsiLCIvKipcbiAqIEJpbmRzIGEgVGlueU1DRSB3aWRnZXQgdG8gPHRleHRhcmVhPiBlbGVtZW50cy5cbiAqL1xuYW5ndWxhci5tb2R1bGUoJ3VpLnRpbnltY2UnLCBbXSlcbiAgLnZhbHVlKCd1aVRpbnltY2VDb25maWcnLCB7fSlcbiAgLmRpcmVjdGl2ZSgndWlUaW55bWNlJywgWyckcm9vdFNjb3BlJywgJyRjb21waWxlJywgJyR0aW1lb3V0JywgJyR3aW5kb3cnLCAnJHNjZScsICd1aVRpbnltY2VDb25maWcnLCAndWlUaW55bWNlU2VydmljZScsIGZ1bmN0aW9uKCRyb290U2NvcGUsICRjb21waWxlLCAkdGltZW91dCwgJHdpbmRvdywgJHNjZSwgdWlUaW55bWNlQ29uZmlnLCB1aVRpbnltY2VTZXJ2aWNlKSB7XG4gICAgdWlUaW55bWNlQ29uZmlnID0gdWlUaW55bWNlQ29uZmlnIHx8IHt9O1xuXG4gICAgaWYgKHVpVGlueW1jZUNvbmZpZy5iYXNlVXJsKSB7XG4gICAgICB0aW55bWNlLmJhc2VVUkwgPSB1aVRpbnltY2VDb25maWcuYmFzZVVybDtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgcmVxdWlyZTogWyduZ01vZGVsJywgJ14/Zm9ybSddLFxuICAgICAgcHJpb3JpdHk6IDU5OSxcbiAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY3RybHMpIHtcbiAgICAgICAgaWYgKCEkd2luZG93LnRpbnltY2UpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbmdNb2RlbCA9IGN0cmxzWzBdLFxuICAgICAgICAgIGZvcm0gPSBjdHJsc1sxXSB8fCBudWxsO1xuXG4gICAgICAgIHZhciBleHByZXNzaW9uLCBvcHRpb25zID0ge1xuICAgICAgICAgIGRlYm91bmNlOiB0cnVlXG4gICAgICAgIH0sIHRpbnlJbnN0YW5jZSxcbiAgICAgICAgICB1cGRhdGVWaWV3ID0gZnVuY3Rpb24oZWRpdG9yKSB7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IGVkaXRvci5nZXRDb250ZW50KHtmb3JtYXQ6IG9wdGlvbnMuZm9ybWF0fSkudHJpbSgpO1xuICAgICAgICAgICAgY29udGVudCA9ICRzY2UudHJ1c3RBc0h0bWwoY29udGVudCk7XG5cbiAgICAgICAgICAgIG5nTW9kZWwuJHNldFZpZXdWYWx1ZShjb250ZW50KTtcbiAgICAgICAgICAgIGlmICghJHJvb3RTY29wZS4kJHBoYXNlKSB7XG4gICAgICAgICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIHRvZ2dsZURpc2FibGUoZGlzYWJsZWQpIHtcbiAgICAgICAgICBpZiAoZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGVuc3VyZUluc3RhbmNlKCk7XG5cbiAgICAgICAgICAgIGlmICh0aW55SW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgdGlueUluc3RhbmNlLmdldEJvZHkoKS5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnRlZGl0YWJsZScsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZW5zdXJlSW5zdGFuY2UoKTtcblxuICAgICAgICAgICAgaWYgKHRpbnlJbnN0YW5jZSAmJiAhdGlueUluc3RhbmNlLnNldHRpbmdzLnJlYWRvbmx5ICYmIHRpbnlJbnN0YW5jZS5nZXREb2MoKSkge1xuICAgICAgICAgICAgICB0aW55SW5zdGFuY2UuZ2V0Qm9keSgpLnNldEF0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gZmV0Y2ggYSB1bmlxdWUgSUQgZnJvbSB0aGUgc2VydmljZVxuICAgICAgICB2YXIgdW5pcXVlSWQgPSB1aVRpbnltY2VTZXJ2aWNlLmdldFVuaXF1ZUlkKCk7XG4gICAgICAgIGF0dHJzLiRzZXQoJ2lkJywgdW5pcXVlSWQpO1xuXG4gICAgICAgIGV4cHJlc3Npb24gPSB7fTtcblxuICAgICAgICBhbmd1bGFyLmV4dGVuZChleHByZXNzaW9uLCBzY29wZS4kZXZhbChhdHRycy51aVRpbnltY2UpKTtcblxuICAgICAgICAvL0RlYm91bmNlIHVwZGF0ZSBhbmQgc2F2ZSBhY3Rpb25cbiAgICAgICAgdmFyIGRlYm91bmNlZFVwZGF0ZSA9IChmdW5jdGlvbihkZWJvdW5jZWRVcGRhdGVEZWxheSkge1xuICAgICAgICAgIHZhciBkZWJvdW5jZWRVcGRhdGVUaW1lcjtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZWQpIHtcblx0ICAgICAgICAkdGltZW91dC5jYW5jZWwoZGVib3VuY2VkVXBkYXRlVGltZXIpO1xuXHQgICAgICAgICBkZWJvdW5jZWRVcGRhdGVUaW1lciA9ICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gKGZ1bmN0aW9uKGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVkLmlzRGlydHkoKSkge1xuICAgICAgICAgICAgICAgICAgZWQuc2F2ZSgpO1xuICAgICAgICAgICAgICAgICAgdXBkYXRlVmlldyhlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KShlZCk7XG4gICAgICAgICAgICB9LCBkZWJvdW5jZWRVcGRhdGVEZWxheSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfSkoNDAwKTtcblxuICAgICAgICB2YXIgc2V0dXBPcHRpb25zID0ge1xuICAgICAgICAgIC8vIFVwZGF0ZSBtb2RlbCB3aGVuIGNhbGxpbmcgc2V0Q29udGVudFxuICAgICAgICAgIC8vIChzdWNoIGFzIGZyb20gdGhlIHNvdXJjZSBlZGl0b3IgcG9wdXApXG4gICAgICAgICAgc2V0dXA6IGZ1bmN0aW9uKGVkKSB7XG4gICAgICAgICAgICBlZC5vbignaW5pdCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBuZ01vZGVsLiRyZW5kZXIoKTtcbiAgICAgICAgICAgICAgbmdNb2RlbC4kc2V0UHJpc3RpbmUoKTtcbiAgICAgICAgICAgICAgICBuZ01vZGVsLiRzZXRVbnRvdWNoZWQoKTtcbiAgICAgICAgICAgICAgaWYgKGZvcm0pIHtcbiAgICAgICAgICAgICAgICBmb3JtLiRzZXRQcmlzdGluZSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gVXBkYXRlIG1vZGVsIHdoZW46XG4gICAgICAgICAgICAvLyAtIGEgYnV0dG9uIGhhcyBiZWVuIGNsaWNrZWQgW0V4ZWNDb21tYW5kXVxuICAgICAgICAgICAgLy8gLSB0aGUgZWRpdG9yIGNvbnRlbnQgaGFzIGJlZW4gbW9kaWZpZWQgW2NoYW5nZV1cbiAgICAgICAgICAgIC8vIC0gdGhlIG5vZGUgaGFzIGNoYW5nZWQgW05vZGVDaGFuZ2VdXG4gICAgICAgICAgICAvLyAtIGFuIG9iamVjdCBoYXMgYmVlbiByZXNpemVkICh0YWJsZSwgaW1hZ2UpIFtPYmplY3RSZXNpemVkXVxuICAgICAgICAgICAgZWQub24oJ0V4ZWNDb21tYW5kIGNoYW5nZSBOb2RlQ2hhbmdlIE9iamVjdFJlc2l6ZWQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgaWYgKCFvcHRpb25zLmRlYm91bmNlKSB7XG4gICAgICAgICAgICAgICAgZWQuc2F2ZSgpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZVZpZXcoZWQpO1xuICAgICAgICAgICAgICBcdHJldHVybjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBkZWJvdW5jZWRVcGRhdGUoZWQpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGVkLm9uKCdibHVyJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGVsZW1lbnRbMF0uYmx1cigpO1xuICAgICAgICAgICAgICBuZ01vZGVsLiRzZXRUb3VjaGVkKCk7XG4gICAgICAgICAgICAgIGlmICghJHJvb3RTY29wZS4kJHBoYXNlKSB7XG4gICAgICAgICAgICAgICAgc2NvcGUuJGRpZ2VzdCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZWQub24oJ3JlbW92ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBlbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICh1aVRpbnltY2VDb25maWcuc2V0dXApIHtcbiAgICAgICAgICAgICAgdWlUaW55bWNlQ29uZmlnLnNldHVwKGVkLCB7XG4gICAgICAgICAgICAgICAgdXBkYXRlVmlldzogdXBkYXRlVmlld1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGV4cHJlc3Npb24uc2V0dXApIHtcbiAgICAgICAgICAgICAgZXhwcmVzc2lvbi5zZXR1cChlZCwge1xuICAgICAgICAgICAgICAgIHVwZGF0ZVZpZXc6IHVwZGF0ZVZpZXdcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmb3JtYXQ6IGV4cHJlc3Npb24uZm9ybWF0IHx8ICdodG1sJyxcbiAgICAgICAgICBzZWxlY3RvcjogJyMnICsgYXR0cnMuaWRcbiAgICAgICAgfTtcbiAgICAgICAgLy8gZXh0ZW5kIG9wdGlvbnMgd2l0aCBpbml0aWFsIHVpVGlueW1jZUNvbmZpZyBhbmRcbiAgICAgICAgLy8gb3B0aW9ucyBmcm9tIGRpcmVjdGl2ZSBhdHRyaWJ1dGUgdmFsdWVcbiAgICAgICAgYW5ndWxhci5leHRlbmQob3B0aW9ucywgdWlUaW55bWNlQ29uZmlnLCBleHByZXNzaW9uLCBzZXR1cE9wdGlvbnMpO1xuICAgICAgICAvLyBXcmFwcGVkIGluICR0aW1lb3V0IGR1ZSB0byAkdGlueW1jZTpyZWZyZXNoIGltcGxlbWVudGF0aW9uLCByZXF1aXJlc1xuICAgICAgICAvLyBlbGVtZW50IHRvIGJlIHByZXNlbnQgaW4gRE9NIGJlZm9yZSBpbnN0YW50aWF0aW5nIGVkaXRvciB3aGVuXG4gICAgICAgIC8vIHJlLXJlbmRlcmluZyBkaXJlY3RpdmVcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKG9wdGlvbnMuYmFzZVVSTCl7XG4gICAgICAgICAgICB0aW55bWNlLmJhc2VVUkwgPSBvcHRpb25zLmJhc2VVUkw7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBtYXliZUluaXRQcm9taXNlID0gdGlueW1jZS5pbml0KG9wdGlvbnMpO1xuICAgICAgICAgIGlmKG1heWJlSW5pdFByb21pc2UgJiYgdHlwZW9mIG1heWJlSW5pdFByb21pc2UudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgbWF5YmVJbml0UHJvbWlzZS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICB0b2dnbGVEaXNhYmxlKHNjb3BlLiRldmFsKGF0dHJzLm5nRGlzYWJsZWQpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0b2dnbGVEaXNhYmxlKHNjb3BlLiRldmFsKGF0dHJzLm5nRGlzYWJsZWQpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG5nTW9kZWwuJGZvcm1hdHRlcnMudW5zaGlmdChmdW5jdGlvbihtb2RlbFZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIG1vZGVsVmFsdWUgPyAkc2NlLnRydXN0QXNIdG1sKG1vZGVsVmFsdWUpIDogJyc7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG5nTW9kZWwuJHBhcnNlcnMudW5zaGlmdChmdW5jdGlvbih2aWV3VmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gdmlld1ZhbHVlID8gJHNjZS5nZXRUcnVzdGVkSHRtbCh2aWV3VmFsdWUpIDogJyc7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG5nTW9kZWwuJHJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGVuc3VyZUluc3RhbmNlKCk7XG5cbiAgICAgICAgICB2YXIgdmlld1ZhbHVlID0gbmdNb2RlbC4kdmlld1ZhbHVlID9cbiAgICAgICAgICAgICRzY2UuZ2V0VHJ1c3RlZEh0bWwobmdNb2RlbC4kdmlld1ZhbHVlKSA6ICcnO1xuXG4gICAgICAgICAgLy8gaW5zdGFuY2UuZ2V0RG9jKCkgY2hlY2sgaXMgYSBndWFyZCBhZ2FpbnN0IG51bGwgdmFsdWVcbiAgICAgICAgICAvLyB3aGVuIGRlc3RydWN0aW9uICYgcmVjcmVhdGlvbiBvZiBpbnN0YW5jZXMgaGFwcGVuXG4gICAgICAgICAgaWYgKHRpbnlJbnN0YW5jZSAmJlxuICAgICAgICAgICAgdGlueUluc3RhbmNlLmdldERvYygpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aW55SW5zdGFuY2Uuc2V0Q29udGVudCh2aWV3VmFsdWUpO1xuICAgICAgICAgICAgLy8gVHJpZ2dlcmluZyBjaGFuZ2UgZXZlbnQgZHVlIHRvIFRpbnlNQ0Ugbm90IGZpcmluZyBldmVudCAmXG4gICAgICAgICAgICAvLyBiZWNvbWluZyBvdXQgb2Ygc3luYyBmb3IgY2hhbmdlIGNhbGxiYWNrc1xuICAgICAgICAgICAgdGlueUluc3RhbmNlLmZpcmUoJ2NoYW5nZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBhdHRycy4kb2JzZXJ2ZSgnZGlzYWJsZWQnLCB0b2dnbGVEaXNhYmxlKTtcblxuICAgICAgICAvLyBUaGlzIGJsb2NrIGlzIGJlY2F1c2Ugb2YgVGlueU1DRSBub3QgcGxheWluZyB3ZWxsIHdpdGggcmVtb3ZhbCBhbmRcbiAgICAgICAgLy8gcmVjcmVhdGlvbiBvZiBpbnN0YW5jZXMsIHJlcXVpcmluZyBpbnN0YW5jZXMgdG8gaGF2ZSBkaWZmZXJlbnRcbiAgICAgICAgLy8gc2VsZWN0b3JzIGluIG9yZGVyIHRvIHJlbmRlciBuZXcgaW5zdGFuY2VzIHByb3Blcmx5XG4gICAgICAgIHZhciB1bmJpbmRFdmVudExpc3RlbmVyID0gc2NvcGUuJG9uKCckdGlueW1jZTpyZWZyZXNoJywgZnVuY3Rpb24oZSwgaWQpIHtcbiAgICAgICAgICB2YXIgZWlkID0gYXR0cnMuaWQ7XG4gICAgICAgICAgaWYgKGFuZ3VsYXIuaXNVbmRlZmluZWQoaWQpIHx8IGlkID09PSBlaWQpIHtcbiAgICAgICAgICAgIHZhciBwYXJlbnRFbGVtZW50ID0gZWxlbWVudC5wYXJlbnQoKTtcbiAgICAgICAgICAgIHZhciBjbG9uZWRFbGVtZW50ID0gZWxlbWVudC5jbG9uZSgpO1xuICAgICAgICAgICAgY2xvbmVkRWxlbWVudC5yZW1vdmVBdHRyKCdpZCcpO1xuICAgICAgICAgICAgY2xvbmVkRWxlbWVudC5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgICAgICAgY2xvbmVkRWxlbWVudC5yZW1vdmVBdHRyKCdhcmlhLWhpZGRlbicpO1xuICAgICAgICAgICAgdGlueW1jZS5leGVjQ29tbWFuZCgnbWNlUmVtb3ZlRWRpdG9yJywgZmFsc2UsIGVpZCk7XG4gICAgICAgICAgICBwYXJlbnRFbGVtZW50LmFwcGVuZCgkY29tcGlsZShjbG9uZWRFbGVtZW50KShzY29wZSkpO1xuICAgICAgICAgICAgdW5iaW5kRXZlbnRMaXN0ZW5lcigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGVuc3VyZUluc3RhbmNlKCk7XG5cbiAgICAgICAgICBpZiAodGlueUluc3RhbmNlKSB7XG4gICAgICAgICAgICB0aW55SW5zdGFuY2UucmVtb3ZlKCk7XG4gICAgICAgICAgICB0aW55SW5zdGFuY2UgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZnVuY3Rpb24gZW5zdXJlSW5zdGFuY2UoKSB7XG4gICAgICAgICAgaWYgKCF0aW55SW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHRpbnlJbnN0YW5jZSA9IHRpbnltY2UuZ2V0KGF0dHJzLmlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XSlcbiAgLnNlcnZpY2UoJ3VpVGlueW1jZVNlcnZpY2UnLCBbXG4gICAgLyoqXG4gICAgICogQSBzZXJ2aWNlIGlzIHVzZWQgdG8gY3JlYXRlIHVuaXF1ZSBJRCdzLCB0aGlzIHByZXZlbnRzIGR1cGxpY2F0ZSBJRCdzIGlmIHRoZXJlIGFyZSBtdWx0aXBsZSBlZGl0b3JzIG9uIHNjcmVlbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBVSVRpbnltY2VTZXJ2aWNlID0gZnVuY3Rpb24oKSB7XG4gICBcdCAgICB2YXIgSURfQVRUUiA9ICd1aS10aW55bWNlJztcbiAgICBcdC8vIHVuaXF1ZUlkIGtlZXBzIHRyYWNrIG9mIHRoZSBsYXRlc3QgYXNzaWduZWQgSURcbiAgICBcdHZhciB1bmlxdWVJZCA9IDA7XG4gICAgICAgIC8vIGdldFVuaXF1ZUlkIHJldHVybnMgYSB1bmlxdWUgSURcbiAgICBcdHZhciBnZXRVbmlxdWVJZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHVuaXF1ZUlkICsrO1xuICAgICAgICAgIHJldHVybiBJRF9BVFRSICsgJy0nICsgdW5pcXVlSWQ7XG4gICAgICAgIH07XG4gICAgICAgIC8vIHJldHVybiB0aGUgZnVuY3Rpb24gYXMgYSBwdWJsaWMgbWV0aG9kIG9mIHRoZSBzZXJ2aWNlXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgIFx0Z2V0VW5pcXVlSWQ6IGdldFVuaXF1ZUlkXG4gICAgICAgIH07XG4gICAgICB9O1xuICAgICAgLy8gcmV0dXJuIGEgbmV3IGluc3RhbmNlIG9mIHRoZSBzZXJ2aWNlXG4gICAgICByZXR1cm4gbmV3IFVJVGlueW1jZVNlcnZpY2UoKTtcbiAgICB9XG4gIF0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ215QXBwLmNvbW1vbicpXG4uZGlyZWN0aXZlKCdteUlucHV0UGFyc2UnLGZ1bmN0aW9uKCl7XG5cdHJldHVybntcblx0XHRyZXN0cmljdDpcIkVBXCIsXG5cdFx0cHJpb3JpdHk6LTEsXG5cdFx0cmVxdWlyZTonP25nTW9kZWwnLFxuXHRcdGxpbms6ZnVuY3Rpb24oJHNjb3BlLCAkZWxlbSwgJGF0dHJzLCBuZ01vZGVsQ3RybCl7XG5cdFx0XHRpZighbmdNb2RlbEN0cmwpIHJldHVybjtcblx0XHRcdGNvbnNvbGUubG9nKCdteUlucHV0UGFyc2UnKTtcblx0XHRcdG5nTW9kZWxDdHJsLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpe1xuLy9cdFx0XHRcdHZhciBWQUxJRF9SRUdFWFAgPSAvXlxcdyskLyxcblx0XHRcdFx0dmFyIFZBTElEX1JFR0VYUCA9IC9eXFxkK1xcLj9cXGR7MCwyfSQvLFxuXHRcdFx0IFx0aXNWYWxpZCA9IFZBTElEX1JFR0VYUC50ZXN0KHZhbHVlKSxcblx0XHRcdCAgICBsYXN0VmFsID0gdmFsdWUuc3Vic3RyaW5nKDAsdmFsdWUubGVuZ3RoLTEpO1xuXHRcdFx0ICAgIFxuXHRcdFx0XHRpZihpc1ZhbGlkKXtcblx0XHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHRcdH1lbHNle1xuXHRcdFx0XHRcdG5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUobGFzdFZhbCk7XG4gICAgICAgICAgICAgICAgICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIoKTtcblx0XHRcdFx0XHRyZXR1cm4gbGFzdFZhbDtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG59KVxuLmRpcmVjdGl2ZSgnY29tcGFueUVtYWlsVmFsaWRhdG9yJyxmdW5jdGlvbigpe1xuLypjaGFuZ2UgZW1haWwgdmFsaWRhdG9yIHJ1bGVzOlVwIHRvIDI1NCBjaGFyYWN0ZXIgYmVmb3JlICdAJyovXG5cdHZhciBFTUFJTF9SRUdFWFAgPSAvXig/PS57MSwyNTR9JCkoPz0uezEsMjU0fUApWy0hIyQlJicqKy8wLTk9P0EtWl5fYGEtent8fX5dKyhcXC5bLSEjJCUmJyorLzAtOT0/QS1aXl9gYS16e3x9fl0rKSpAW0EtWmEtejAtOV0oW0EtWmEtejAtOS1dezAsNjF9W0EtWmEtejAtOV0pPyhcXC5bQS1aYS16MC05XShbQS1aYS16MC05LV17MCw2MX1bQS1aYS16MC05XSk/KSokLztcblx0cmV0dXJue1xuXHRcdHJlc3RyaWN0OlwiRUFcIixcblx0XHRwcmlvcml0eTotMSxcblx0XHRyZXF1aXJlOic/bmdNb2RlbCcsXG5cdFx0bGluazpmdW5jdGlvbigkc2NvcGUsJGVsZW0sJGF0dHJzLG5nTW9kZWxDdHJsKXtcblx0XHRcdGlmKG5nTW9kZWxDdHJsICYmIG5nTW9kZWxDdHJsLiR2YWxpZGF0b3JzLmVtYWlsKXtcblx0XHRcdFx0bmdNb2RlbEN0cmwuJHZhbGlkYXRvcnMuZW1haWwgPSBmdW5jdGlvbihtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcblx0XHQgICAgXHRcdHZhciB2YWx1ZSA9IG1vZGVsVmFsdWUgfHwgdmlld1ZhbHVlO1xuXHRcdCAgICBcdFx0cmV0dXJuIG5nTW9kZWxDdHJsLiRpc0VtcHR5KHZhbHVlKSB8fCBFTUFJTF9SRUdFWFAudGVzdCh2YWx1ZSk7XG5cdFx0IFx0XHQgfTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn0pXG4uZGlyZWN0aXZlKCdyZXRhaW5EZWNpbWFsJyxmdW5jdGlvbigpe1xuXHR2YXIgUk9VTkRVUF8wX1JFR0VYUCA9IC9eXFxkKyQvLFx0XG5cdFx0Uk9VTkRVUF8xX1JFR0VYUCA9IC9eXFxkKyhcXC4pP1xcZHswLDF9JC8sXG5cdFx0Uk9VTkRVUF8yX1JFR0VYUCA9IC9eXFxkKyhcXC4pP1xcZHswLDJ9JC8sXG5cdFx0cmV0YWluQ29uZmlnID0ge1xuXHRcdFx0cmVzdHJpY3Q6XCJBXCIsXG5cdFx0XHRyZXF1aXJlOic/bmdNb2RlbCcsXG5cdFx0XHRsaW5rOmZ1bmN0aW9uKCRzY29wZSwkZWxlbSwkYXR0cnMsbmdNb2RlbEN0cmwpe1xuXHRcdFx0XHRuZ01vZGVsQ3RybC4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKHZhbHVlKXtcblx0XHRcdFx0XHR2YXIgcmV0YWluRGVjaW1hbCA9ICRhdHRycy5yZXRhaW5EZWNpbWFsLFxuXHRcdFx0XHRcdFx0bGFzdFZhbCA9IHZhbHVlLnN1YnN0cmluZygwLHZhbHVlLmxlbmd0aC0xKSxcblx0XHRcdFx0XHRcdGxhc3RDaGFyID0gdmFsdWUuY2hhckF0KHZhbHVlLmxlbmd0aC0xKSxcblx0XHRcdFx0XHRcdGlzVmFsaWQsc3RyO1xuXHRcdFx0XHRcdHN3aXRjaChyZXRhaW5EZWNpbWFsKXtcblx0XHRcdFx0XHRcdGNhc2UgXCIxXCI6XG5cdFx0XHRcdFx0XHRcdGlzVmFsaWQgPSBST1VORFVQXzFfUkVHRVhQLnRlc3QodmFsdWUpO1xuXHRcdFx0XHRcdFx0XHRzdHIgPSAnLjAnO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdGNhc2UgXCIyXCI6XG5cdFx0XHRcdFx0XHRcdGlzVmFsaWQgPSBST1VORFVQXzJfUkVHRVhQLnRlc3QodmFsdWUpO1xuXHRcdFx0XHRcdFx0XHRzdHIgPSAnLjAwJztcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0XHRpc1ZhbGlkID0gUk9VTkRVUF8wX1JFR0VYUC50ZXN0KHZhbHVlKTtcblx0XHRcdFx0XHRcdFx0c3RyID0gJyc7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cdFx0XHQgICAgXG5cdFx0XHRcdFx0aWYoaXNWYWxpZCl7XG5cdFx0XHRcdFx0XHRpZihsYXN0Q2hhciA9PSAnLicpe1xuXHRcdFx0XHRcdFx0XHRuZ01vZGVsQ3RybC4kc2V0Vmlld1ZhbHVlKGxhc3RWYWwrc3RyKTtcblx0ICAgICAgICAgICAgICAgICAgICBcdG5nTW9kZWxDdHJsLiRyZW5kZXIoKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGxhc3RWYWwrc3RyO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdFx0XHRcdH1lbHNle1xuXHRcdFx0XHRcdFx0bmdNb2RlbEN0cmwuJHNldFZpZXdWYWx1ZShsYXN0VmFsKTtcblx0ICAgICAgICAgICAgICAgICAgICBuZ01vZGVsQ3RybC4kcmVuZGVyKCk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gbGFzdFZhbDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH07XG5cdHJldHVybiByZXRhaW5Db25maWc7XG59KVxuLmRpcmVjdGl2ZSgnc2VhcmNoU2VsZWN0JyxmdW5jdGlvbigkc2NlKXtcblx0cmV0dXJue1xuXHRcdHJlc3RyaWN0OlwiRUFcIixcblx0XHRyZXBsYWNlOnRydWUsXG5cdFx0dHJhbnNjbHVkZTogdHJ1ZSxcblx0XHRyZXF1aXJlOic/bmdNb2RlbCcsXG5cdFx0c2NvcGU6e1xuXHRcdFx0b3B0aW9uczonPScsXG5cdFx0XHRuYW1lOidAJ1xuXHRcdH0sXG5cdFx0dGVtcGxhdGU6XHRcblx0XHRcdCc8ZGl2IGNsYXNzPVwidWkgZmx1aWQgc2VhcmNoIHNlbGVjdGlvbiBkcm9wZG93biB1cHdhcmRcIj5cXFxuXHRcdFx0XHQ8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJ7e25hbWV9fVwiIG5nLW1vZGVsPVwic2VsZWN0ZWRWYWx1ZVwiPlxcXG5cdFx0XHRcdDxpIGNsYXNzPVwiZHJvcGRvd24gaWNvblwiPjwvaT5cXFxuXHRcdFx0XHQ8ZGl2IGNsYXNzPVwiZGVmYXVsdCB0ZXh0XCIgbmctYmluZD1cInNlbGVjdGVkVmFsdWVcIj48L2Rpdj5cXFxuXHRcdFx0ICBcdDxkaXYgY2xhc3M9XCJtZW51IHRyYW5zaXRpb24gaGlkZGVuXCI+XFxcblx0XHRcdCAgICBcdDxkaXYgY2xhc3M9XCJpdGVtXCIgZGF0YS1pbmRleD1cInt7b3B0aW9uLmluZGV4fX1cIiBkYXRhLXZhbHVlPVwie3tvcHRpb24uaW5kZXh9fVwiIG5nLXJlcGVhdCA9IFwib3B0aW9uIGluIG9wdGlvbnNcIiBuZy1iaW5kPVwib3B0aW9uLml0ZW1cIj48L2Rpdj5cXFxuXHRcdFx0ICBcdDwvZGl2PlxcXG5cdFx0XHQ8L2Rpdj4nLFxuXHRcdGxpbms6ZnVuY3Rpb24oJHNjb3BlLCRlbGVtLCRhdHRycyxuZ01vZGVsKXtcblx0XHRcdCRlbGVtLmRyb3Bkb3duKHtcblx0XHRcdFx0ZnVsbFRleHRTZWFyY2g6dHJ1ZSxcblx0XHRcdFx0b25DaGFuZ2U6IGZ1bmN0aW9uKHZhbHVlLCB0ZXh0LCAkc2VsZWN0ZWRJdGVtKSB7XG5cdFx0XHRcdFx0JHNjb3BlLiRhcHBseShmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0bmdNb2RlbC4kc2V0Vmlld1ZhbHVlKHZhbHVlKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdCAgICB9XG5cdFx0XHR9KTtcblx0XHRcdG5nTW9kZWwuJHJlbmRlciA9IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdpdCBpcyAkcmVuZGVyJyk7XG5cdFx0XHRcdCRlbGVtLmRyb3Bkb3duKCdzZXQgc2VsZWN0ZWQnLFwiM1wiKTtcblx0XHRcdH07XG4vL1x0XHRcdCRlbGVtLmRyb3Bkb3duKCdzZXQgc2VsZWN0ZWQnLFwiM1wiKTtcblx0XHRcdCRhdHRycy4kb2JzZXJ2ZSgnbmdNb2RlbCcsZnVuY3Rpb24odmFsKXtcblx0XHRcdFx0Y29uc29sZS5sb2codmFsKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ215QXBwLmNvbW1vbicpXG4uZmFjdG9yeSgnaHR0cEludGVyY2VwdG9yJyxmdW5jdGlvbigkc2NlLCRyb290U2NvcGUsJHRpbWVvdXQpe1xuXHR2YXIgc3RhcnRUaW1lLGVuZFRpbWU7XG5cdHJldHVybntcblx0XHQncmVxdWVzdCc6ZnVuY3Rpb24ocmVxKXtcblx0XHRcdHN0YXJ0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXHRcdFx0JHJvb3RTY29wZS5sb2FkaW5nID0gdHJ1ZTtcblx0XHRcdHJldHVybiByZXE7XG5cdFx0fSxcblx0XHQncmVzcG9uc2UnOmZ1bmN0aW9uKHJlcyl7XG5cdFx0XHRlbmRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cdFx0XHQkcm9vdFNjb3BlLiRldmFsQXN5bmMoZnVuY3Rpb24oKXtcblx0XHRcdFx0dmFyIGxvYWRpbmdUaW1lID0gZW5kVGltZS1zdGFydFRpbWU7XG5cdFx0XHRcdGlmKGxvYWRpbmdUaW1lID4gNTAwKXtcblx0XHRcdFx0XHQkcm9vdFNjb3BlLmxvYWRpbmcgPSBmYWxzZTtcblx0XHRcdFx0fWVsc2V7XG5cdFx0XHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdCRyb290U2NvcGUubG9hZGluZyA9IGZhbHNlO1xuXHRcdFx0XHRcdH0sNTAwKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gcmVzO1xuXHRcdH1cblx0fVxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ215QXBwLmNvbW1vbicpXG4uZmFjdG9yeSgndGVzdFNlcnZpY2UnLGZ1bmN0aW9uKCRodHRwLCRxKXtcblx0cmV0dXJue1xuXHRcdGdldE1haW46ZnVuY3Rpb24oKXtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJ21vY2svdGVzdE5nUm91dGUtbWFpbi5qc29uJyk7XG5cdFx0fSxcblx0XHRnZXRVc2VyOmZ1bmN0aW9uKCl7XG5cdFx0XHQvLyByZXR1cm4gJGh0dHAuZ2V0KCdtb2NrL3Rlc3ROZ1JvdXRlLXVzZXIuanNvbicpO1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS91c2VyLzEnKTtcblx0XHR9LFxuXHRcdGdldFJlc3Q6ZnVuY3Rpb24oKXtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9yZXN0YXBpL2xvZ2luJyk7XG5cdFx0fVxuXHR9XG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnbXlBcHAubWFpbi5kcm9wZG93bicpXG4uY29udHJvbGxlcignVGVzdERyb3BEb3duQ3RybCcsZnVuY3Rpb24oJHNjb3BlLCAkcm91dGUsICRyb3V0ZVBhcmFtcywgJGxvY2F0aW9uLCAkc2NlKXtcbiAgICAkc2NvcGUuZHJvcGRvd25fbW9kZWwgPSAnaXRlbTMnO1xuXG4gICAgJHNjb3BlLmRyb3Bkb3duX3JlcGVhdF9tb2RlbCA9ICdpdGVtMSc7XG4gICAgJHNjb3BlLmRyb3Bkb3duX2l0ZW1zID0gW1xuICAgICAgJ2l0ZW0xJyxcbiAgICAgICdpdGVtMicsXG4gICAgICAnaXRlbTMnLFxuICAgICAgJ2l0ZW00J1xuICAgIF07XG5cbiAgICAkc2NvcGUuZHJvcGRvd25fa2V5X3ZhbHVlX21vZGVsID0gJyc7XG4gICAgJHNjb3BlLmRyb3Bkb3duX2tleV92YWx1ZV9pdGVtcyA9IHtcbiAgICAgICdpdGVtMSc6ICdDb29sIGl0ZW0gMScsXG4gICAgICAnaXRlbTInOiAnQ29vbCBpdGVtIDInLFxuICAgICAgJ2l0ZW0zJzogJ0Nvb2wgaXRlbSAzJyxcbiAgICAgICdpdGVtNCc6ICdDb29sIGl0ZW0gNCdcbiAgICB9O1xufSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnbXlBcHAubWFpbicpXG4uY29udHJvbGxlcignbWFpbkN0cmwnLGZ1bmN0aW9uKCRzY29wZSwgJHJvdXRlLCAkcm91dGVQYXJhbXMsICRsb2NhdGlvbiwgbWFpbkRhdGEsICRwYXJzZSl7XG5cdCRzY29wZS5wYWdlTmFtZSA9IG1haW5EYXRhLnBhZ2VOYW1lO1xuXHQkc2NvcGUubXlJbnB1dFZhbDEgPSBcIjExMVwiO1xuXHQkc2NvcGUubXlJbnB1dFZhbDIgPSBcIlwiO1xuXHQkc2NvcGUubXlJbnB1dFZhbDMgPSBcIlwiO1xuXHQkc2NvcGUubXlJbnB1dFZhbDQgPSBcIlwiO1xuLy9cdCRzY29wZS5kYXRlID0gcmVzdERhdGEuZGF0YS5kYXRlO1xuLy9cdGNvbnNvbGUuZGVidWcocmVzdERhdGEpO1xuXHQkc2NvcGUuc2VsZWN0VmFsID0gXCJcIjtcblx0JHNjb3BlLnBhcmVudE9wdGlvbnMgPSBbXG5cdFx0e2l0ZW06XCJBcmFiaWMgQ2hpbmVzZVwiLHNlbGVjdDp0cnVlLGluZGV4OjF9LFxuXHRcdHtpdGVtOlwiQ2hpbmVzZSBcIixzZWxlY3Q6ZmFsc2UsaW5kZXg6Mn0sXG5cdFx0e2l0ZW06XCJEdXRjaFwiLHNlbGVjdDpmYWxzZSxpbmRleDozfSxcblx0XHR7aXRlbTpcIkVuZ2xpc2hcIixzZWxlY3Q6ZmFsc2UsaW5kZXg6NH0sXG5cdFx0e2l0ZW06XCJGcmVuY2hcIixzZWxlY3Q6ZmFsc2UsaW5kZXg6NX0sXG5cdFx0e2l0ZW06XCJHZXJtYW5cIixzZWxlY3Q6ZmFsc2UsaW5kZXg6Nn0sXG5cdFx0e2l0ZW06XCJHcmVla1wiLHNlbGVjdDpmYWxzZSxpbmRleDo3fSxcblx0XHR7aXRlbTpcIkh1bmdhcmlhblwiLHNlbGVjdDpmYWxzZSxpbmRleDo4fSxcblx0XHR7aXRlbTpcIkl0YWxpYW5cIixzZWxlY3Q6ZmFsc2UsaW5kZXg6OX0sXG5cdFx0e2l0ZW06XCJKYXBhbmVzZVwiLHNlbGVjdDpmYWxzZSxpbmRleDoxMH0sXG5cdFx0e2l0ZW06XCJLb3JlYW5cIixzZWxlY3Q6ZmFsc2UsaW5kZXg6MTF9LFxuXHRcdHtpdGVtOlwiTGl0aHVhbmlhblwiLHNlbGVjdDpmYWxzZSxpbmRleDoxMn0sXG5cdFx0e2l0ZW06XCJQZXJzaWFuXCIsc2VsZWN0OmZhbHNlLGluZGV4OjEzfSxcblx0XHR7aXRlbTpcIlBvbGlzaFwiLHNlbGVjdDpmYWxzZSxpbmRleDoxNH0sXG5cdFx0e2l0ZW06XCJQb3J0dWd1ZXNlXCIsc2VsZWN0OmZhbHNlLGluZGV4OjE1fSxcblx0XHR7aXRlbTpcIlJ1c3NpYW5cIixzZWxlY3Q6ZmFsc2UsaW5kZXg6MTZ9LFxuXHRcdHtpdGVtOlwiU3BhbmlzaFwiLHNlbGVjdDpmYWxzZSxpbmRleDoxN30sXG5cdFx0e2l0ZW06XCJTd2VkaXNoXCIsc2VsZWN0OmZhbHNlLGluZGV4OjE4fSxcblx0XHR7aXRlbTpcIlR1cmtpc2hcIixzZWxlY3Q6ZmFsc2UsaW5kZXg6MTl9LFxuXHRcdHtpdGVtOlwiVmlldG5hbWVzZVwiLHNlbGVjdDpmYWxzZSxpbmRleDoyMH1cblx0XTtcblx0JHNjb3BlLnVwZGF0ZVZhbCA9IGZ1bmN0aW9uKCl7XG5cdFx0dmFyIHRleHQgPSBcIidpdCBpcyBteSB0ZXN0IXRoZSByZXN1bHQgaXM6JyArIG15SW5wdXRWYWwxXCI7XG5cdFx0dmFyIGlucHV0RnVjID0gJHBhcnNlKHRleHQpO1xuXHRcdCRzY29wZS5teUlucHV0VmFsUmVzID0gaW5wdXRGdWMoJHNjb3BlKTtcblx0fVxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ215QXBwLm1haW4udGlueW1pY2UnKVxuLmNvbnRyb2xsZXIoJ3RpbnltaWNlQ3RybCcsZnVuY3Rpb24oJHNjb3BlLCAkcm91dGUsICRyb3V0ZVBhcmFtcywgJGxvY2F0aW9uLCAkc2NlKXtcbiAgIHZhciBjdHJsID0gdGhpcztcblx0JHNjb3BlLnNldHRpbmcgPSB7XG5cdFx0aW5saW5lOiBmYWxzZSxcblx0ICBcdHBsdWdpbnM6IFwiYWR2bGlzdCBhdXRvbGluayBsaXN0cyBsaW5rIGltYWdlIGNoYXJtYXAgcHJpbnQgcHJldmlldyBhbmNob3JcIixcbiAgIFx0XHRyZWFkb25seSA6ICRzY29wZS5vcGVyYXRlID09PSAndmlldycgPyB0cnVlIDogZmFsc2UsXG5cdCAgICBza2luOiAnbGlnaHRncmF5JyxcbiAgICBcdHRoZW1lIDogJ21vZGVybicsXG4gICAgXHRtaW5faGVpZ2h0OiAyMDAsXG4gICAgXHRtYXhfaGVpZ2h0OiA1MDBcblx0fTtcbiAgICB0aGlzLnVwZGF0ZUh0bWwgPSBmdW5jdGlvbigpIHtcbiAgICAgIGN0cmwudGlueW1jZUh0bWwgPSAkc2NlLnRydXN0QXNIdG1sKGN0cmwudGlueW1jZSk7XG4gICAgfTtcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdteUFwcC51c2VyJylcbi5jb250cm9sbGVyKCd1c2VyQ3RybCcsZnVuY3Rpb24oJHNjb3BlLCAkcm91dGUsICRyb3V0ZVBhcmFtcywgJGxvY2F0aW9uLCB1c2VyRGF0YSl7XG5cdCRzY29wZS5wYWdlTmFtZSA9IHVzZXJEYXRhLnBhZ2VOYW1lO1xuXHQkc2NvcGUudXNlcklkID0gJHJvdXRlUGFyYW1zLnVzZXJJZDtcblx0JHNjb3BlLmZvbyA9IFwicGxlYXNlIGlucHV0IVwiO1xuXHR2YXIgY3RybCA9IHRoaXM7XG5cdGNvbnNvbGUubG9nKHRoaXMpO1xuXHRjb25zb2xlLmxvZyhjdHJsKTtcblx0dGhpcy51cGRhdGUgPSBmdW5jdGlvbigpe1xuXHRcdGNvbnNvbGUubG9nKCd0aGlzIHVwZGF0ZScpO1xuXHR9O1xuXHR0aGlzLmRlbGV0ZSA9IGZ1bmN0aW9uKCl7XG5cdFx0Y29uc29sZS5sb2coJ3RoaXMgdXBkYXRlJyk7XG5cdH07XG5cdCRzY29wZS5leHBvcnRGaWxlID0gZnVuY3Rpb24gKCkge1xuLy9cdFx0aWYoJHNjb3BlLnR5cGUgPT0gXCJvcmRlclJlcG9ydHNcIil7XG4vL1x0XHRcdHZhciBjcml0ZXJpYSA9ICRzY29wZS5zZWFyY2hGaWVsZHNEYXRhO1xuLy9cdFx0XHRpZihjcml0ZXJpYSl7XG4vL1x0XHRcdFx0dmFyIHBhcmFtcyA9IHtcbi8vXHRcdFx0XHRcdHNlYXJjaDogJ3tcImNyaXRlcmlhXCI6JysgYW5ndWxhci50b0pzb24oY3JpdGVyaWEpICsgJ30nXG4vL1x0XHRcdFx0fTtcbi8vXHRcdFx0XHRjb21tb25TZXJ2LmV4cG9ydFJlc3VsdFdpdGhQYXJhbXMocnBzLmNvbW1vblVybCArICdvcmRlclJlcG9ydCcgKyBycHMuZG93bmxvYWQsIHBhcmFtcywgXCJPcmRlclJlcG9ydHMuY3N2XCIpO1xuLy9cdFx0XHR9ZWxzZXtcbi8vXHRcdFx0XHRjb21tb25TZXJ2LmV4cG9ydFJlc3VsdChycHMuY29tbW9uVXJsICsgJ29yZGVyUmVwb3J0JyArIHJwcy5kb3dubG9hZCwgbnVsbCwgXCJPcmRlclJlcG9ydHMuY3N2XCIpO1xuLy9cdFx0XHR9XG4vL1x0XHR9ZWxzZSBpZigkc2NvcGUudHlwZSA9PSBcIm9yZGVySXRlbVJlcG9ydHNcIil7XG4vL1x0XHRcdGNvbW1vblNlcnYuZXhwb3J0UmVzdWx0KHJwcy5jb21tb25VcmwgKyAnb3JkZXJJdGVtUmVwb3J0JyArIHJwcy5kb3dubG9hZCwgbnVsbCwgXCJJdGVtUmVwb3J0cy5jc3ZcIik7XG4vL1x0XHR9ZWxzZSBpZigkc2NvcGUudHlwZSA9PSBcImF1ZGl0c1wiKXtcbi8vXHRcdFx0dmFyIGNyaXRlcmlhID0gJHNjb3BlLnNlYXJjaEZpZWxkc0RhdGE7XG4vL1x0XHRcdGlmKGNyaXRlcmlhKXtcbi8vXHRcdFx0XHQvLyB2YXIgc2VhcmNoRmllbGRzID0geydjcml0ZXJpYSc6IGNyaXRlcmlhfTtcbi8vXHRcdFx0XHQvLyBjb21tb25TZXJ2LmV4cG9ydFJlc3VsdChycHMuY29tbW9uVXJsICsgJ2F1ZGl0cycgKyBycHMuZG93bmxvYWQgKyBcIj9zZWFyY2g9XCIgKyBhbmd1bGFyLnRvSnNvbihzZWFyY2hGaWVsZHMpLCBudWxsLCBcIkF1ZGl0TG9ncy5jc3ZcIik7XG4vL1xuLy9cdFx0XHRcdCRodHRwKHtcbi8vXHRcdFx0XHRcdG1ldGhvZDogJ0dFVCcsXG4vL1x0XHRcdFx0XHR1cmw6IHJwcy5jb21tb25VcmwgKyAnYXVkaXRzJyArIHJwcy5kb3dubG9hZCxcbi8vXHRcdFx0XHRcdHBhcmFtczoge1xuLy9cdFx0XHRcdFx0XHRzZWFyY2g6ICd7XCJjcml0ZXJpYVwiOicrIGFuZ3VsYXIudG9Kc29uKGNyaXRlcmlhKSArICd9J1xuLy9cdFx0XHRcdFx0fVxuLy9cdFx0XHRcdH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4vL1x0XHRcdFx0XHR2YXIgYmxvYiA9IG5ldyBCbG9iKFtyZXNwb25zZS5kYXRhXSwge1xuLy9cdFx0XHRcdFx0XHR0eXBlOiAndGV4dC9jc3Y7Y2hhcnNldD11dGYtOCdcbi8vXHRcdFx0XHRcdH0pO1xuLy9cdFx0XHRcdFx0dmFyIGZpbGVOYW1lID0gXCJcIjtcbi8vXHRcdFx0XHRcdHRyeSB7XG4vL1x0XHRcdFx0XHRcdGZpbGVOYW1lID0gbmV3IFJlZ0V4cCgnZmlsZW5hbWU9XCIoLispXCInLCAnaWcnKS5leGVjKHJlc3BvbnNlLmhlYWRlcnMoKVsnY29udGVudC1kaXNwb3NpdGlvbiddKVsxXTtcbi8vXHRcdFx0XHRcdH0gY2F0Y2ggKGUpIHtcbi8vXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coZSk7XG4vL1x0XHRcdFx0XHRcdGZpbGVOYW1lID0gXCJBdWRpdExvZ3MuY3N2XCI7XG4vL1x0XHRcdFx0XHR9XG4vL1x0XHRcdFx0XHRzYXZlQXMoYmxvYiwgZmlsZU5hbWUpO1xuLy9cdFx0XHRcdH0pO1xuLy9cbi8vXHRcdFx0fWVsc2V7XG4vL1x0XHRcdFx0Y29tbW9uU2Vydi5leHBvcnRSZXN1bHQocnBzLmNvbW1vblVybCArICdhdWRpdHMnICsgcnBzLmRvd25sb2FkLCBudWxsLCBcIkF1ZGl0TG9ncy5jc3ZcIik7XG4vL1x0XHRcdH1cbi8vXHRcdH1lbHNle1xuLy9cdFx0XHRjb21tb25TZXJ2LmV4cG9ydFJlc3VsdChycHMuY29tbW9uVXJsICsgJHNjb3BlLnR5cGUgKyBycHMuZXhwb3J0LCBudWxsLCBcInRlbXBsYXRlLmNzdlwiKTtcbi8vXHRcdH1cblx0XHR2YXIgdHlwZSA9ICRzY29wZS50eXBlLFxuXHRcdFx0Y3JpdGVyaWEgPSAkc2NvcGUuc2VhcmNoRmllbGRzRGF0YTtcblx0XHRcdFxuXHRcdHN3aXRjaCh0eXBlKXtcblx0XHRcdGNhc2UgJyc6XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0YnJlYWs7XG5cdFx0fVxuXHR9O1xufSk7Il19
