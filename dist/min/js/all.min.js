angular.module("myApp",["ngRoute","angularTrix","myApp.common","myApp.main","myApp.user"]).config(["$routeProvider","$locationProvider","$httpProvider",function(e,t,r){r.defaults.headers.get||(r.defaults.headers.get={}),r.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",r.defaults.headers.get["Cache-Control"]="no-cache",r.defaults.headers.get.Pragma="no-cache",e.when("/",{templateUrl:"template/testNgRoute-main.html",controller:"mainCtrl",resolve:{mainData:["testService",function(e){return e.getMain().then(function(e){return e.data}).catch(function(e){return e.data})}]}}).when("/user/:userId",{templateUrl:"template/testNgRoute-user.html",controller:"userCtrl",resolve:{userData:["testService",function(e){return e.getUser().then(function(e){return e.data})}]},reloadOnSearch:!1}).otherwise({redirectTo:"/"}),t.html5Mode(!1),t.hashPrefix(""),r.interceptors.push("httpInterceptor"),console.log("the angular app is start!")}]).run(["$rootScope","$templateCache",function(e,t){e.loading=!1,e.$on("$routeChangeStart",function(e,r,o){void 0!==o&&t.remove(o.templateUrl)}),e.$on("$routeUpdate",function(e,t,r){console.log(e),console.log(t),console.log(r)})}]),angular.element(document).ready(function(){angular.bootstrap(document,["myApp"])});
angular.module("myApp.common",[]),angular.module("myApp.main",["myApp.common"]),angular.module("myApp.user",["myApp.common"]);
angular.module("myApp.common").directive("myInputParse",function(){return{restrict:"EA",priority:-1,require:"?ngModel",link:function(e,r,t,n){n&&(console.log("myInputParse"),n.$parsers.push(function(e){var r=/^\d+\.?\d{0,2}$/,t=r.test(e),i=e.substring(0,e.length-1);return t?e:(n.$setViewValue(i),n.$render(),i)}))}}}).directive("companyEmailValidator",function(){var e=/^(?=.{1,254}$)(?=.{1,254}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/;return{restrict:"EA",priority:-1,require:"?ngModel",link:function(r,t,n,i){i&&i.$validators.email&&(i.$validators.email=function(r,t){var n=r||t;return i.$isEmpty(n)||e.test(n)})}}}).directive("retainDecimal",function(){var e=/^\d+$/,r=/^\d+(\.)?\d{0,1}$/,t=/^\d+(\.)?\d{0,2}$/;return{restrict:"A",require:"?ngModel",link:function(n,i,a,s){s.$parsers.push(function(n){var i,u,l=a.retainDecimal,c=n.substring(0,n.length-1),o=n.charAt(n.length-1);switch(l){case"1":i=r.test(n),u=".0";break;case"2":i=t.test(n),u=".00";break;default:i=e.test(n),u=""}return i?"."==o?(s.$setViewValue(c+u),s.$render(),c+u):n:(s.$setViewValue(c),s.$render(),c)})}}});
angular.module("myApp.common").factory("httpInterceptor",["$sce","$rootScope","$timeout",function(n,e,t){var o,r;return{request:function(n){return o=(new Date).getTime(),e.loading=!0,n},response:function(n){return r=(new Date).getTime(),e.$evalAsync(function(){r-o>500?e.loading=!1:t(function(){e.loading=!1},500)}),n}}}]);
angular.module("myApp.common").factory("testService",["$http","$q",function(t,e){return{getMain:function(){return t.get("mock/testNgRoute-main.json")},getUser:function(){return t.get("mock/testNgRoute-user.json")},getRest:function(){return t.get("/restapi/login")}}}]);
angular.module("myApp.main").controller("mainCtrl",["$scope","$route","$routeParams","$location","mainData","$parse",function(a,t,n,e,m,l){a.pageName=m.pageName,a.myInputVal1="111",a.myInputVal2="",a.myInputVal3="",a.myInputVal4="",a.updateVal=function(){var t=l("'it is my test!the result is:' + myInputVal1");a.myInputValRes=t(a)}}]);
angular.module("myApp.user").controller("userCtrl",["$scope","$route","$routeParams","$location","userData",function(e,a,r,o,u){e.pageName=u.pageName,e.userId=r.userId,e.foo="please input!"}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIm1vZHVsZS5qcyIsImRpcmVjdGl2ZS9pbnB1dERpcmUuanMiLCJzZXJ2aWNlL2ludGVyQ2VwdG9yU2Vydi5qcyIsInNlcnZpY2UvdGVzdFNlcnYuanMiLCJjb250cm9sbGVyL21haW4vbWFpbkN0cmwuanMiLCJjb250cm9sbGVyL3VzZXIvdXNlckN0cmwuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRodHRwUHJvdmlkZXIiLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJnZXQiLCIkcm91dGVQcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJyZXNvbHZlIiwibWFpbkRhdGEiLCJ0ZXN0U2VydmljZSIsImdldE1haW4iLCJ0aGVuIiwicmVzIiwidXNlckRhdGEiLCJnZXRVc2VyIiwiZGF0YSIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCIkbG9jYXRpb25Qcm92aWRlciIsImh0bWw1TW9kZSIsImhhc2hQcmVmaXgiLCJydW4iLCIkcm9vdFNjb3BlIiwiJHRlbXBsYXRlQ2FjaGUiLCJsb2FkaW5nIiwiY3VycmVudCIsInJlbW92ZSIsIiRvbiIsImV2ZW50IiwibmV4dCIsImNvbnNvbGUiLCJsb2ciLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsInByaW9yaXR5IiwicmVxdWlyZSIsImxpbmsiLCIkc2NvcGUiLCIkZWxlbSIsIiRhdHRycyIsIm5nTW9kZWxDdHJsIiwiJHBhcnNlcnMiLCJwdXNoIiwidmFsdWUiLCJWQUxJRF9SRUdFWFAiLCJpc1ZhbGlkIiwidGVzdCIsImxhc3RWYWwiLCJzdWJzdHJpbmciLCJsZW5ndGgiLCIkc2V0Vmlld1ZhbHVlIiwiJHJlbmRlciIsIiR2YWxpZGF0b3JzIiwiZW1haWwiLCJtb2RlbFZhbHVlIiwidmlld1ZhbHVlIiwiJGlzRW1wdHkiLCJFTUFJTF9SRUdFWFAiLCJzdHIiLCJyZXRhaW5EZWNpbWFsIiwibGFzdENoYXIiLCJjaGFyQXQiLCJST1VORFVQXzFfUkVHRVhQIiwiUk9VTkRVUF8yX1JFR0VYUCIsIlJPVU5EVVBfMF9SRUdFWFAiLCJmYWN0b3J5IiwiJHNjZSIsIiR0aW1lb3V0Iiwic3RhcnRUaW1lIiwiZW5kVGltZSIsInJlcXVlc3QiLCJyZXEiLCJyZXNwb25zZSIsIkRhdGUiLCJnZXRUaW1lIiwiJGV2YWxBc3luYyIsIiRodHRwIiwiJHEiLCJteUlucHV0VmFsMSIsIm15SW5wdXRWYWwyIiwibXlJbnB1dFZhbDMiLCJteUlucHV0VmFsNCJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQVFDLE9BQU8sU0FDZCxVQUNBLGNBQ0EsZUFDQSxhQUNBLGVBQ0VDLHlCQUVGLDZFQUtBQyxFQUFjQyxTQUFTQyxRQUFRQywwSEFLL0JILEVBQUFDLFNBQUFDLFFBQUFDLElBQUEsT0FBQSxXQUVDQyxFQUFZQyxLQUFBLEtBQ1pDLFlBQVcsaUNBQ1hDLFdBQVEsV0FDUEMsU0FDQ0MsVUFDQyxjQUNFLFNBQU1DLEdBQ0QsTUFBSUEsR0FBQUMsVUFBQUMsS0FBQSxTQUFBQyw0SkFZVEMsVUFDTCxjQUNBLFNBQVdKLEdBQ0gsTUFBQUEsR0FBQUssVUFBQUgsS0FBQSxTQUFBQyxHQUNQLE1BQUFBLEdBQUFHLDhCQU1EQyxXQUFlQyxXQUFBLE1BRWZDLEVBQVVDLFdBQUEsR0FDVkQsRUFBV0UsV0FBQSx1RkFLWkMsbUNBR0EsU0FBQUMsRUFBY0MsR0FDZEQsRUFBWUUsU0FBQSxnREFFWixLQUFBQyxHQUNBRixFQUFxQkcsT0FBQUQsRUFBQXBCLGlCQUdWc0IsSUFBQSxlQUFzQixTQUFRQyxFQUFBQyxFQUFBSixpQ0FHdENLLFFBQUFDLElBQVdOO0FDdEVmN0IsUUFBUUMsT0FBTyxtQkFDZkQsUUFBUUMsT0FBTyxjQUFjLGlCQUM3QkQsUUFBUUMsT0FBTyxjQUFjO0FDRjdCRCxRQUFRQyxPQUFPLGdCQUFBbUMsVUFBQSxlQUFBLFdBQ2QsT0FDQUMsU0FBTSxLQUNMQyxVQUFTLEVBQ1RDLFFBQVUsV0FDVkMsS0FBUSxTQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNIQSxJQUVKVixRQUFRQyxJQUFJLGdCQUNaUyxFQUFZQyxTQUFTQyxLQUFLLFNBQVNDLEdBRTlCLEdBQUFDLEdBQWUsa0JBQUFDLEVBQUFELEVBQUFFLEtBQUFILEdBQUFJLEVBQUFKLEVBQUFLLFVBQUEsRUFBQUwsRUFBQU0sT0FBQSxFQUNsQixPQUFBSixHQUNZRixHQUVWSCxFQUFRVSxjQUFBSCxHQUNWUCxFQUFPVyxVQUNISixvUUFTUmQsU0FBVSxpQkFFVkUsUUFBSSxXQUNKQyxLQUFNLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0xBLEdBQVNBLEVBQUFZLFlBQUFDLFFBQ1RiLEVBQVVZLFlBQUFDLE1BQUEsU0FBQUMsRUFBQUMsR0FDRixHQUFBWixHQUFBVyxHQUFBQyxDQUNILE9BQVNmLEdBQWFnQixTQUFPYixJQUFZYyxFQUFBWCxLQUFBSCxzS0FVL0NILEVBQVVDLFNBQWdCQyxLQUFBLFNBQVVDLEdBQ2hDLEdBQW1CRSxHQUFBYSxFQUFuQkMsRUFBbUJwQixFQUFBb0IsY0FBQVosRUFBQUosRUFBQUssVUFBQSxFQUFBTCxFQUFBTSxPQUFBLEdBQUFXLEVBQUFqQixFQUFBa0IsT0FBQWxCLEVBQUFNLE9BQUEsRUFDdEIsUUFBQVUsR0FDQSxJQUFBLElBQ0FkLEVBQWVpQixFQUFBaEIsS0FBQUgsR0FDTGUsRUFBQSxJQUNELE1BQ0gsS0FBQSxJQUNKYixFQUFZa0IsRUFBdUJqQixLQUFBSCxHQUM5QmUsRUFBQSxLQUNILE1BQ0EsU0FDQWIsRUFBUW1CLEVBQUFsQixLQUFBSCxHQUNGZSxFQUFBLEdBR0wsTUFBTWIsR0FDTixLQUFBZSxHQUNJcEIsRUFBQVUsY0FBQUgsRUFBQVcsR0FDSmxCLEVBQVVXLFVBQ0pKLEVBQUFXLEdBRVBmLEdBRUNILEVBQU1VLGNBQUFILEdBQ05QLEVBQUFXO0FDcEVQdkQsUUFBUUMsT0FBTyxnQkFBQW9FLFFBQUEsbUJBQ2QsT0FDQSxhQUNBLFdBQ0MsU0FBVUMsRUFBQTVDLEVBQWE2QyxHQUN0QixHQUFBQyxHQUFnQkMsQ0FDaEIsUUFDQUMsUUFBTyxTQUFBQyxHQUdQLDhCQUREakQsRUFBV0UsU0FBYSxFQUNiK0MsR0FFVEMsU0FBSSxTQUFjNUQsR0FZbkIsTUFYSXlELElBQUEsR0FBY0ksT0FBSUMsVUFDcEJwRCxFQUFXcUQsV0FBVSxXQUNqQk4sRUFBQUQsRUFDZSxJQUNsQjlDLEVBQVdFLFNBQVUsNkJBSWpCLE9BR1BaO0FDeEJIaEIsUUFBUUMsT0FBTyxnQkFBQW9FLFFBQUEsZUFDZCxRQUNBLEtBQ0MsU0FBUVcsRUFBQUMsR0FDUCwwQkFFRCxNQUFRRCxHQUFVMUUsSUFBQSxrREFHbEIsTUFBUTBFLEdBQVUxRSxJQUFBO0FDVHBCTixRQUFRQyxPQUFPLGNBQUFTLFdBQUEsWUFDZCxTQUNBLFNBQ0EsZUFDQSxZQUNBLFdBQ0EscURBR0ErQixFQUFPeUMsWUFBWSxNQUNsQnpDLEVBQUkwQyxZQUFPLEdBQ1gxQyxFQUFJMkMsWUFBa0IsR0FDdEIzQyxFQUFPNEMsWUFBZ0I7QUNaekJyRixRQUFRQyxPQUFPLGNBQUFTLFdBQUEsWUFDZCxTQUNBLFNBQ0EsZUFDQSIsImZpbGUiOiJhbGwubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoJ215QXBwJyxbXHJcblx0J25nUm91dGUnLFxyXG5cdCdhbmd1bGFyVHJpeCcsXHJcblx0J215QXBwLmNvbW1vbicsXHJcblx0J215QXBwLm1haW4nLFxyXG5cdCdteUFwcC51c2VyJ1xyXG5dKS5jb25maWcoZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyLCAkaHR0cFByb3ZpZGVyKXtcclxuICAgIC8vSW5pdGlhbGl6ZSBHZXQgUmVxdWVzdFxyXG5cdGlmKCEkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuZ2V0KXtcclxuXHQgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5nZXQgPSB7fTtcclxuXHR9XHJcblxyXG5cdC8vRGlzYWJsZSBJRSBBamF4IFJlcXVlc3QgQ2FjaGVcclxuXHQkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydYLVJlcXVlc3RlZC1XaXRoJ10gPSAnWE1MSHR0cFJlcXVlc3QnO1xyXG5cdCRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5nZXRbJ0NhY2hlLUNvbnRyb2wnXSA9ICduby1jYWNoZSc7XHJcblx0JGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmdldFsnUHJhZ21hJ10gPSAnbm8tY2FjaGUnO1xyXG5cdFxyXG5cdC8vcm91dGUgc2V0dGluZ1xyXG5cdCRyb3V0ZVByb3ZpZGVyXHJcblx0LndoZW4oJy8nLHtcclxuXHRcdHRlbXBsYXRlVXJsOid0ZW1wbGF0ZS90ZXN0TmdSb3V0ZS1tYWluLmh0bWwnLFxyXG5cdFx0Y29udHJvbGxlcjonbWFpbkN0cmwnLFxyXG5cdFx0cmVzb2x2ZTp7XHJcblx0XHRcdG1haW5EYXRhOmZ1bmN0aW9uKHRlc3RTZXJ2aWNlKXtcclxuXHRcdFx0XHRyZXR1cm4gdGVzdFNlcnZpY2UuZ2V0TWFpbigpLnRoZW4oZnVuY3Rpb24ocmVzKXtcclxuXHRcdFx0XHRcdHJldHVybiByZXMuZGF0YTtcclxuXHRcdFx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnIpe1xyXG5cdFx0XHRcdFx0cmV0dXJuIGVyci5kYXRhO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcbi8vXHRcdFx0cmVzdERhdGE6ZnVuY3Rpb24odGVzdFNlcnZpY2Upe1xyXG4vL1x0XHRcdFx0cmV0dXJuIHRlc3RTZXJ2aWNlLmdldFJlc3QoKS50aGVuKGZ1bmN0aW9uKHJlcyl7XHJcbi8vXHRcdFx0XHRcdHJldHVybiByZXMuZGF0YTtcclxuLy9cdFx0XHRcdH0pLmNhdGNoKGZ1bmN0aW9uKGVycil7XHJcbi8vXHRcdFx0XHRcdHJldHVybiBlcnIuZGF0YTtcclxuLy9cdFx0XHRcdH0pO1xyXG4vL1x0XHRcdH1cclxuXHRcdH1cclxuXHR9KVxyXG5cdC53aGVuKCcvdXNlci86dXNlcklkJyx7XHJcblx0XHR0ZW1wbGF0ZVVybDondGVtcGxhdGUvdGVzdE5nUm91dGUtdXNlci5odG1sJyxcclxuXHRcdGNvbnRyb2xsZXI6J3VzZXJDdHJsJyxcclxuXHRcdHJlc29sdmU6e1xyXG5cdFx0XHR1c2VyRGF0YTpmdW5jdGlvbih0ZXN0U2VydmljZSl7XHJcblx0XHRcdFx0cmV0dXJuIHRlc3RTZXJ2aWNlLmdldFVzZXIoKS50aGVuKGZ1bmN0aW9uKHJlcyl7XHJcblx0XHRcdFx0XHRyZXR1cm4gcmVzLmRhdGE7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRyZWxvYWRPblNlYXJjaDpmYWxzZVxyXG5cdH0pXHJcblx0Lm90aGVyd2lzZSh7XHJcblx0XHRyZWRpcmVjdFRvOicvJ1xyXG5cdH0pO1xyXG5cdFxyXG5cdC8vaHRtbDUgbW9kZSBzZXR0aW5nXHJcblx0JGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKGZhbHNlKTtcclxuXHQkbG9jYXRpb25Qcm92aWRlci5oYXNoUHJlZml4KCcnKTtcclxuXHJcblx0Ly9JbnRlcmNlcHRvclxyXG5cdCRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ2h0dHBJbnRlcmNlcHRvcicpO1xyXG5cdGNvbnNvbGUubG9nKCd0aGUgYW5ndWxhciBhcHAgaXMgc3RhcnQhJyk7XHJcbn0pXHJcbi5ydW4oZnVuY3Rpb24oJHJvb3RTY29wZSwkdGVtcGxhdGVDYWNoZSl7XHJcblx0JHJvb3RTY29wZS5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbihldmVudCwgbmV4dCwgY3VycmVudCkgeyAgXHJcbiAgICAgICAgaWYgKHR5cGVvZihjdXJyZW50KSAhPT0gJ3VuZGVmaW5lZCcpeyAgXHJcbiAgICAgICAgICAgICR0ZW1wbGF0ZUNhY2hlLnJlbW92ZShjdXJyZW50LnRlbXBsYXRlVXJsKTsgIFxyXG4gICAgICAgIH0gIFxyXG4gICAgfSk7XHJcbiAgICAkcm9vdFNjb3BlLiRvbignJHJvdXRlVXBkYXRlJyxmdW5jdGlvbihldmVudCwgbmV4dCwgY3VycmVudCl7XHJcbiAgICBcdGNvbnNvbGUubG9nKGV2ZW50KTtcclxuICAgIFx0Y29uc29sZS5sb2cobmV4dCk7XHJcbiAgICBcdGNvbnNvbGUubG9nKGN1cnJlbnQpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5hbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XHJcbiAgIGFuZ3VsYXIuYm9vdHN0cmFwKGRvY3VtZW50LFsnbXlBcHAnXSk7XHJcbn0pO1xyXG4iLCJhbmd1bGFyLm1vZHVsZSgnbXlBcHAuY29tbW9uJyxbXSk7XHJcbmFuZ3VsYXIubW9kdWxlKCdteUFwcC5tYWluJyxbJ215QXBwLmNvbW1vbiddKTtcclxuYW5ndWxhci5tb2R1bGUoJ215QXBwLnVzZXInLFsnbXlBcHAuY29tbW9uJ10pOyIsImFuZ3VsYXIubW9kdWxlKCdteUFwcC5jb21tb24nKVxyXG4uZGlyZWN0aXZlKCdteUlucHV0UGFyc2UnLGZ1bmN0aW9uKCl7XHJcblx0cmV0dXJue1xyXG5cdFx0cmVzdHJpY3Q6XCJFQVwiLFxyXG5cdFx0cHJpb3JpdHk6LTEsXHJcblx0XHRyZXF1aXJlOic/bmdNb2RlbCcsXHJcblx0XHRsaW5rOmZ1bmN0aW9uKCRzY29wZSwgJGVsZW0sICRhdHRycywgbmdNb2RlbEN0cmwpe1xyXG5cdFx0XHRpZighbmdNb2RlbEN0cmwpIHJldHVybjtcclxuXHRcdFx0Y29uc29sZS5sb2coJ215SW5wdXRQYXJzZScpO1xyXG5cdFx0XHRuZ01vZGVsQ3RybC4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKHZhbHVlKXtcclxuLy9cdFx0XHRcdHZhciBWQUxJRF9SRUdFWFAgPSAvXlxcdyskLyxcclxuXHRcdFx0XHR2YXIgVkFMSURfUkVHRVhQID0gL15cXGQrXFwuP1xcZHswLDJ9JC8sXHJcblx0XHRcdCBcdGlzVmFsaWQgPSBWQUxJRF9SRUdFWFAudGVzdCh2YWx1ZSksXHJcblx0XHRcdCAgICBsYXN0VmFsID0gdmFsdWUuc3Vic3RyaW5nKDAsdmFsdWUubGVuZ3RoLTEpO1xyXG5cdFx0XHQgICAgXHJcblx0XHRcdFx0aWYoaXNWYWxpZCl7XHJcblx0XHRcdFx0XHRyZXR1cm4gdmFsdWU7XHJcblx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHRuZ01vZGVsQ3RybC4kc2V0Vmlld1ZhbHVlKGxhc3RWYWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5nTW9kZWxDdHJsLiRyZW5kZXIoKTtcclxuXHRcdFx0XHRcdHJldHVybiBsYXN0VmFsO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG59KVxyXG4uZGlyZWN0aXZlKCdjb21wYW55RW1haWxWYWxpZGF0b3InLGZ1bmN0aW9uKCl7XHJcbi8qY2hhbmdlIGVtYWlsIHZhbGlkYXRvciBydWxlczpVcCB0byAyNTQgY2hhcmFjdGVyIGJlZm9yZSAnQCcqL1xyXG5cdHZhciBFTUFJTF9SRUdFWFAgPSAvXig/PS57MSwyNTR9JCkoPz0uezEsMjU0fUApWy0hIyQlJicqKy8wLTk9P0EtWl5fYGEtent8fX5dKyhcXC5bLSEjJCUmJyorLzAtOT0/QS1aXl9gYS16e3x9fl0rKSpAW0EtWmEtejAtOV0oW0EtWmEtejAtOS1dezAsNjF9W0EtWmEtejAtOV0pPyhcXC5bQS1aYS16MC05XShbQS1aYS16MC05LV17MCw2MX1bQS1aYS16MC05XSk/KSokLztcclxuXHRyZXR1cm57XHJcblx0XHRyZXN0cmljdDpcIkVBXCIsXHJcblx0XHRwcmlvcml0eTotMSxcclxuXHRcdHJlcXVpcmU6Jz9uZ01vZGVsJyxcclxuXHRcdGxpbms6ZnVuY3Rpb24oJHNjb3BlLCRlbGVtLCRhdHRycyxuZ01vZGVsQ3RybCl7XHJcblx0XHRcdGlmKG5nTW9kZWxDdHJsICYmIG5nTW9kZWxDdHJsLiR2YWxpZGF0b3JzLmVtYWlsKXtcclxuXHRcdFx0XHRuZ01vZGVsQ3RybC4kdmFsaWRhdG9ycy5lbWFpbCA9IGZ1bmN0aW9uKG1vZGVsVmFsdWUsIHZpZXdWYWx1ZSkge1xyXG5cdFx0ICAgIFx0XHR2YXIgdmFsdWUgPSBtb2RlbFZhbHVlIHx8IHZpZXdWYWx1ZTtcclxuXHRcdCAgICBcdFx0cmV0dXJuIG5nTW9kZWxDdHJsLiRpc0VtcHR5KHZhbHVlKSB8fCBFTUFJTF9SRUdFWFAudGVzdCh2YWx1ZSk7XHJcblx0XHQgXHRcdCB9O1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59KVxyXG4uZGlyZWN0aXZlKCdyZXRhaW5EZWNpbWFsJyxmdW5jdGlvbigpe1xyXG5cdHZhciBST1VORFVQXzBfUkVHRVhQID0gL15cXGQrJC8sXHRcclxuXHRcdFJPVU5EVVBfMV9SRUdFWFAgPSAvXlxcZCsoXFwuKT9cXGR7MCwxfSQvLFxyXG5cdFx0Uk9VTkRVUF8yX1JFR0VYUCA9IC9eXFxkKyhcXC4pP1xcZHswLDJ9JC8sXHJcblx0XHRyZXRhaW5Db25maWcgPSB7XHJcblx0XHRcdHJlc3RyaWN0OlwiQVwiLFxyXG5cdFx0XHRyZXF1aXJlOic/bmdNb2RlbCcsXHJcblx0XHRcdGxpbms6ZnVuY3Rpb24oJHNjb3BlLCRlbGVtLCRhdHRycyxuZ01vZGVsQ3RybCl7XHJcblx0XHRcdFx0bmdNb2RlbEN0cmwuJHBhcnNlcnMucHVzaChmdW5jdGlvbih2YWx1ZSl7XHJcblx0XHRcdFx0XHR2YXIgcmV0YWluRGVjaW1hbCA9ICRhdHRycy5yZXRhaW5EZWNpbWFsLFxyXG5cdFx0XHRcdFx0XHRsYXN0VmFsID0gdmFsdWUuc3Vic3RyaW5nKDAsdmFsdWUubGVuZ3RoLTEpLFxyXG5cdFx0XHRcdFx0XHRsYXN0Q2hhciA9IHZhbHVlLmNoYXJBdCh2YWx1ZS5sZW5ndGgtMSksXHJcblx0XHRcdFx0XHRcdGlzVmFsaWQsc3RyO1xyXG5cdFx0XHRcdFx0c3dpdGNoKHJldGFpbkRlY2ltYWwpe1xyXG5cdFx0XHRcdFx0XHRjYXNlIFwiMVwiOlxyXG5cdFx0XHRcdFx0XHRcdGlzVmFsaWQgPSBST1VORFVQXzFfUkVHRVhQLnRlc3QodmFsdWUpO1xyXG5cdFx0XHRcdFx0XHRcdHN0ciA9ICcuMCc7XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdGNhc2UgXCIyXCI6XHJcblx0XHRcdFx0XHRcdFx0aXNWYWxpZCA9IFJPVU5EVVBfMl9SRUdFWFAudGVzdCh2YWx1ZSk7XHJcblx0XHRcdFx0XHRcdFx0c3RyID0gJy4wMCc7XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0XHRcdFx0aXNWYWxpZCA9IFJPVU5EVVBfMF9SRUdFWFAudGVzdCh2YWx1ZSk7XHJcblx0XHRcdFx0XHRcdFx0c3RyID0gJyc7XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHR9XHRcdFx0ICAgIFxyXG5cdFx0XHRcdFx0aWYoaXNWYWxpZCl7XHJcblx0XHRcdFx0XHRcdGlmKGxhc3RDaGFyID09ICcuJyl7XHJcblx0XHRcdFx0XHRcdFx0bmdNb2RlbEN0cmwuJHNldFZpZXdWYWx1ZShsYXN0VmFsK3N0cik7XHJcblx0ICAgICAgICAgICAgICAgICAgICBcdG5nTW9kZWxDdHJsLiRyZW5kZXIoKTtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gbGFzdFZhbCtzdHI7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0cmV0dXJuIHZhbHVlO1xyXG5cdFx0XHRcdFx0fWVsc2V7XHJcblx0XHRcdFx0XHRcdG5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUobGFzdFZhbCk7XHJcblx0ICAgICAgICAgICAgICAgICAgICBuZ01vZGVsQ3RybC4kcmVuZGVyKCk7XHJcblx0XHRcdFx0XHRcdHJldHVybiBsYXN0VmFsO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdHJldHVybiByZXRhaW5Db25maWc7XHJcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdteUFwcC5jb21tb24nKVxyXG4uZmFjdG9yeSgnaHR0cEludGVyY2VwdG9yJyxmdW5jdGlvbigkc2NlLCRyb290U2NvcGUsJHRpbWVvdXQpe1xyXG5cdHZhciBzdGFydFRpbWUsZW5kVGltZTtcclxuXHRyZXR1cm57XHJcblx0XHQncmVxdWVzdCc6ZnVuY3Rpb24ocmVxKXtcclxuXHRcdFx0c3RhcnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcblx0XHRcdCRyb290U2NvcGUubG9hZGluZyA9IHRydWU7XHJcblx0XHRcdHJldHVybiByZXE7XHJcblx0XHR9LFxyXG5cdFx0J3Jlc3BvbnNlJzpmdW5jdGlvbihyZXMpe1xyXG5cdFx0XHRlbmRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcblx0XHRcdCRyb290U2NvcGUuJGV2YWxBc3luYyhmdW5jdGlvbigpe1xyXG5cdFx0XHRcdHZhciBsb2FkaW5nVGltZSA9IGVuZFRpbWUtc3RhcnRUaW1lO1xyXG5cdFx0XHRcdGlmKGxvYWRpbmdUaW1lID4gNTAwKXtcclxuXHRcdFx0XHRcdCRyb290U2NvcGUubG9hZGluZyA9IGZhbHNlO1xyXG5cdFx0XHRcdH1lbHNle1xyXG5cdFx0XHRcdFx0JHRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHRcdFx0XHRcdFx0JHJvb3RTY29wZS5sb2FkaW5nID0gZmFsc2U7XHJcblx0XHRcdFx0XHR9LDUwMCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0cmV0dXJuIHJlcztcclxuXHRcdH1cclxuXHR9XHJcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdteUFwcC5jb21tb24nKVxyXG4uZmFjdG9yeSgndGVzdFNlcnZpY2UnLGZ1bmN0aW9uKCRodHRwLCRxKXtcclxuXHRyZXR1cm57XHJcblx0XHRnZXRNYWluOmZ1bmN0aW9uKCl7XHJcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJ21vY2svdGVzdE5nUm91dGUtbWFpbi5qc29uJyk7XHJcblx0XHR9LFxyXG5cdFx0Z2V0VXNlcjpmdW5jdGlvbigpe1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCdtb2NrL3Rlc3ROZ1JvdXRlLXVzZXIuanNvbicpO1xyXG5cdFx0fSxcclxuXHRcdGdldFJlc3Q6ZnVuY3Rpb24oKXtcclxuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL3Jlc3RhcGkvbG9naW4nKTtcclxuXHRcdH1cclxuXHR9XHJcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdteUFwcC5tYWluJylcclxuLmNvbnRyb2xsZXIoJ21haW5DdHJsJyxmdW5jdGlvbigkc2NvcGUsICRyb3V0ZSwgJHJvdXRlUGFyYW1zLCAkbG9jYXRpb24sIG1haW5EYXRhLCAkcGFyc2Upe1xyXG5cdCRzY29wZS5wYWdlTmFtZSA9IG1haW5EYXRhLnBhZ2VOYW1lO1xyXG5cdCRzY29wZS5teUlucHV0VmFsMSA9IFwiMTExXCI7XHJcblx0JHNjb3BlLm15SW5wdXRWYWwyID0gXCJcIjtcclxuXHQkc2NvcGUubXlJbnB1dFZhbDMgPSBcIlwiO1xyXG5cdCRzY29wZS5teUlucHV0VmFsNCA9IFwiXCI7XHJcbi8vXHQkc2NvcGUuZGF0ZSA9IHJlc3REYXRhLmRhdGEuZGF0ZTtcclxuLy9cdGNvbnNvbGUuZGVidWcocmVzdERhdGEpO1xyXG5cdCRzY29wZS51cGRhdGVWYWwgPSBmdW5jdGlvbigpe1xyXG5cdFx0dmFyIHRleHQgPSBcIidpdCBpcyBteSB0ZXN0IXRoZSByZXN1bHQgaXM6JyArIG15SW5wdXRWYWwxXCI7XHJcblx0XHR2YXIgaW5wdXRGdWMgPSAkcGFyc2UodGV4dCk7XHJcblx0XHQkc2NvcGUubXlJbnB1dFZhbFJlcyA9IGlucHV0RnVjKCRzY29wZSk7XHJcblx0fVxyXG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnbXlBcHAudXNlcicpXHJcbi5jb250cm9sbGVyKCd1c2VyQ3RybCcsZnVuY3Rpb24oJHNjb3BlLCAkcm91dGUsICRyb3V0ZVBhcmFtcywgJGxvY2F0aW9uLCB1c2VyRGF0YSl7XHJcblx0JHNjb3BlLnBhZ2VOYW1lID0gdXNlckRhdGEucGFnZU5hbWU7XHJcblx0JHNjb3BlLnVzZXJJZCA9ICRyb3V0ZVBhcmFtcy51c2VySWQ7XHJcblx0JHNjb3BlLmZvbyA9IFwicGxlYXNlIGlucHV0IVwiO1xyXG59KTsiXX0=
